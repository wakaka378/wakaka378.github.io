{"meta":{"title":"Hexo","subtitle":"","description":"","author":"John Doe","url":"https://wakaka378.github.io","root":"/"},"pages":[{"title":"Repositories","date":"2023-04-09T10:54:23.884Z","updated":"2023-04-09T10:54:23.884Z","comments":false,"path":"repository/index.html","permalink":"https://wakaka378.github.io/repository/index.html","excerpt":"","text":""},{"title":"404 Not Foundï¼šè¯¥é¡µæ— æ³•æ˜¾ç¤º","date":"2023-04-09T10:55:30.353Z","updated":"2023-04-09T10:55:30.352Z","comments":false,"path":"/404.html","permalink":"https://wakaka378.github.io/404.html","excerpt":"","text":""},{"title":"åˆ†ç±»","date":"2023-04-09T10:55:30.456Z","updated":"2023-04-09T10:55:30.456Z","comments":false,"path":"categories/index.html","permalink":"https://wakaka378.github.io/categories/index.html","excerpt":"","text":""},{"title":"ä¹¦å•","date":"2023-04-09T10:55:30.431Z","updated":"2023-04-09T10:55:30.431Z","comments":false,"path":"books/index.html","permalink":"https://wakaka378.github.io/books/index.html","excerpt":"","text":""},{"title":"å‹æƒ…é“¾æ¥","date":"2023-04-09T10:55:30.487Z","updated":"2023-04-09T10:55:30.487Z","comments":true,"path":"links/index.html","permalink":"https://wakaka378.github.io/links/index.html","excerpt":"","text":""},{"title":"å…³äº","date":"2023-04-09T10:55:30.400Z","updated":"2023-04-09T10:55:30.400Z","comments":false,"path":"about/index.html","permalink":"https://wakaka378.github.io/about/index.html","excerpt":"","text":"ä¸ªäººè¯¦ç»†ä»‹ç»"},{"title":"æ ‡ç­¾","date":"2023-04-09T10:55:30.548Z","updated":"2023-04-09T10:55:30.548Z","comments":false,"path":"tags/index.html","permalink":"https://wakaka378.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"release-it è‡ªåŠ¨å‘åŒ…","slug":"æºç å…±è¯»è®¡åˆ’â€”â€”ã€release-it-è‡ªåŠ¨å‘åŒ…ã€‘","date":"2023-06-11T10:56:36.000Z","updated":"2023-06-13T11:15:56.533Z","comments":true,"path":"2023-06-11-æºç å…±è¯»è®¡åˆ’â€”â€”ã€release-it-è‡ªåŠ¨å‘åŒ…ã€‘.html","link":"","permalink":"https://wakaka378.github.io/2023-06-11-%E6%BA%90%E7%A0%81%E5%85%B1%E8%AF%BB%E8%AE%A1%E5%88%92%E2%80%94%E2%80%94%E3%80%90release-it-%E8%87%AA%E5%8A%A8%E5%8F%91%E5%8C%85%E3%80%91.html","excerpt":"","text":"å‰è¨€ ä½œä¸ºä¸€ååˆæ ¼çš„å‰(æ‘¸é±¼)å·¥ç¨‹å¸ˆï¼Œæ—¥å¸¸å·¥ä½œå¼€å‘ä¸­æˆ–å¤šæˆ–å°‘éƒ½è¦å’ŒnpmåŒ…æ‰“äº¤é“ã€‚ä¹‹å‰å·¥ä½œä¸­å°±æœ‰è¿‡å‘å¸ƒnpmåŒ…çš„ç»å†ï¼Œä½†é‚£æ—¶å¹´å°‘æ— çŸ¥ï¼ŒåªçŸ¥é“æ— è„‘é€šè¿‡npm publishå‘åŒ…ï¼Œä¹Ÿæ²¡æœ‰æ‰“ tagã€ç‰ˆæœ¬ã€æ²¡ç”Ÿæˆ changelogçš„æ¦‚å¿µã€‚ç›´åˆ°çœ‹åˆ°æºç å…±è¯»ä¸­æœ‰è‡ªåŠ¨å‘åŒ…ç« èŠ‚ï¼Œè¿˜å¯ä»¥è‡ªåŠ¨æ‰“tagç­‰åŠŸèƒ½ï¼Œèµ¶ç´§æ”¶è—å­¦ä¹ èµ·æ¥ã€‚ å‰ç½®å‡†å¤‡ è¦åœ¨npmä¸Šå‘åŒ…ï¼Œå½“ç„¶éœ€è¦åœ¨npmä¸Šæ³¨å†Œè´¦å·ï¼Œè¿™ä¸ªå°±ä¸å†èµ˜è¿°ã€‚æˆ‘ä»¬åœ¨æ³¨å†Œå®Œè´¦å·ä¹‹åï¼Œå…ˆè®¾ç½®ä¸€ä¸‹é•œåƒæºï¼Œå†ç™»å½•è‡ªå·±çš„npmè´¦å·ã€‚å¦‚æœæœ‰åŒå­¦å’Œæˆ‘ä¸€æ ·ï¼Œä½¿ç”¨çš„æ˜¯å…¬å¸å†…éƒ¨ç§æœ‰çš„npmæœåŠ¡å™¨ï¼Œä½¿ç”¨çš„è´¦å·å’Œé•œåƒæºéƒ½æ˜¯å…¬å¸æä¾›çš„ï¼Œä¸è¦å¼„æ··æ·†ï¼Œä¸‹é¢æˆ‘ä»¬å¼€å§‹å…·ä½“æ­¥éª¤ã€‚ å‡†å¤‡é¡¹ç›®æ–‡ä»¶ é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç„¶åæ‰§è¡Œnpm init -y åˆå§‹åŒ–æˆ‘ä»¬çš„é¡¹ç›® è®¾ç½®é•œåƒæº å¦‚æœæ˜¯åœ¨å·²æœ‰é¡¹ç›®ä¸­æ¥å…¥ï¼Œæœ€å¥½è¦æŸ¥çœ‹ä¸€ä¸‹å½“å‰é¡¹ç›®é•œåƒæºï¼Œåˆå§‹åŒ–é¡¹ç›®å¯ä»¥è·³è¿‡ã€‚ é‚£ä¸ºä»€ä¹ˆè¦è®¾ç½®é•œåƒæºå‘¢ï¼Ÿè£…è¿‡npmåŒ…çš„åŒå­¦éƒ½çŸ¥é“ï¼Œnpmå®˜æ–¹publicä»“åº“æ˜¯éƒ¨ç½²åœ¨å›½å¤–ï¼Œä½¿ç”¨å®˜æ–¹é•œåƒæºè£…åŒ…é€Ÿåº¦å¾ˆæ…¢ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ‰æ—¶å€™ä¼šå°†é•œåƒæºè®¾ç½®ä¸ºhttps://registry.npm.taobao.orgï¼Œä¹Ÿå°±æ˜¯æ·˜å®é•œåƒã€‚è¿™ä¸ªæ—¶å€™å¦‚æœæˆ‘ä»¬ä½¿ç”¨npmçš„è´¦å·æ˜¯æ— æ³•ç™»å½•çš„ï¼Œæˆ–è€…æ˜¯è¯´ä½ æŠŠé•œåƒè®¾ç½®ä¸ºå…¬å¸å†…éƒ¨ç§æœ‰çš„é•œåƒæºï¼Œè¿™ä¸ªæ—¶å€™é€šè¿‡å®˜æ–¹npmè´¦å·ä¹Ÿæ˜¯æ— æ³•ç™»å½•çš„ï¼Œæ›¾ç»æˆ‘å°±åœ¨è¿™é‡Œè¸©è¿‡å‘ã€‚åœ¨å“ªæ³¨å†Œçš„è´¦å·ï¼Œéœ€è¦å°†é•œåƒæºè®¾ç½®ä¸ºæ³¨å†Œåœ°çš„ä»“åº“ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨npmå®˜æ–¹é•œåƒæºï¼Œå°†é•œåƒæºè®¾ç½®ä¸ºhttps://registry.npmjs.org 12345# æŸ¥çœ‹å½“å‰é•œåƒæºnpm config get registry # è®¾ç½®é•œåƒæºnpm set registry https://registry.npmjs.org å¦å¤–ä¸€ç§è®¾ç½®é•œåƒæºæ–¹å¼ï¼Œå¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­æ–°å»º.npmrcæ–‡ä»¶ 1registry = https://registry.npmjs.org/ ç™»å½•npm ä½¿ç”¨npmæ³¨å†Œçš„è´¦å·å¯†ç ç™»å½• 1234567891011# ç™»å½•npm loginâœ npm loginUsername: ç”¨æˆ·åPassword: å¯†ç Email: æ³¨å†Œé‚®ç®±Enter one-time password: ä¸€æ¬¡æ€§å¯†ç  é‚®ç®±ä¼šæ”¶åˆ°é‚®ä»¶âœ npm whoami # æŸ¥çœ‹å½“å‰ç™»å½•è´¦å·åç§° è‡ªåŠ¨å‘åŒ… release-it å®˜ç½‘ä»“åº“ release-itå®ƒåšäº†ä»€ä¹ˆï¼Ÿ åŒæ­¥æäº¤gitè¿œç«¯å†…å®¹ æ›´æ–°ç‰ˆæœ¬å· äº§å‡ºchangelog æäº¤å˜åŠ¨ å¢åŠ git tag æ¨é€tagæ›´æ–°è‡³è¿œç«¯ æˆ‘ä»¬å¯ä»¥é€šè¿‡--dry-runå¯ä»¥çœ‹åˆ°å…·ä½“è¿›è¡Œäº†å“ªäº›æ“ä½œ è‡ªåŠ¨å‘åŒ… å®‰è£… 12345âœ npm init release-itnpx: 30 å®‰è£…æˆåŠŸï¼Œç”¨æ—¶ 5.813 ç§’? Where to add the release-it config? â€ºâ¯ .release-it.json package.json or 1âœ npm install -D release-it æ·»åŠ å‘½ä»¤ 123&quot;scripts&quot;: &#123; &quot;release&quot;: &quot;release-it&quot; &#125;, é…ç½® åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºæ–‡ä»¶ .release-it.json .release-it.js .release-it.yaml .release-it.toml æˆ–è€…æ˜¯åœ¨pakcage.jsonæ–‡ä»¶ä¸­æ·»åŠ release-itå±æ€§ï¼Œè¿™é‡Œæˆ‘å°±ç›´æ¥åˆ›å»º.release-it.jsonæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹é…ç½®æˆ–è€…å¯ä»¥æŸ¥çœ‹ æ›´å¤šé…ç½® 123456789101112131415&#123; &quot;github&quot;: &#123; &quot;release&quot;: true &#125;, &quot;git&quot;: &#123; &quot;commitMessage&quot;: &quot;release: v$&#123;version&#125;&quot; &#125;, &quot;npm&quot;: &#123; &quot;publish&quot;: true &#125;, &quot;hooks&quot;: &#123; &quot;after:bump&quot;: &quot;echo æ›´æ–°ç‰ˆæœ¬æˆåŠŸ&quot; &#125;,&#125; ç”ŸæˆCHANGELOG å®‰è£…æ’ä»¶ 1âœ npm i @release-it/conventional-changelog -D ç„¶åå°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°.release-it.jsonæ–‡ä»¶ä¸­ 12345678&#123; &quot;plugins&quot;: &#123; &quot;@release-it/conventional-changelog&quot;: &#123; &quot;preset&quot;: &quot;angular&quot;, &quot;infile&quot;: &quot;CHANGELOG.md&quot; &#125; &#125; è‡ªåŠ¨å‘å¸ƒ è¿è¡Œå‘½ä»¤ï¼Œå°±å¯ä»¥è¿›è¡Œå‘å¸ƒ 123âœ npm run release# orâœ npx release-it å°†release-itå‚æ•°æ”¾åœ¨--åé¢ 1npm run release --minor --ci å‘å¸ƒå…¶ä»–ç‰ˆæœ¬ npmç‰ˆæœ¬å· è¿™é‡Œå…ˆåˆæ­¥è¡¥å……ä¸€ä¸‹npmç‰ˆæœ¬å·ç›¸å…³çŸ¥è¯†ï¼Œnpmçš„ç‰ˆæœ¬å·éµå¾ªSemVer è§„èŒƒï¼Œç‰ˆæœ¬å·æ ¼å¼å¿…é¡»é‡‡ç”¨X.Y.Zçš„æ ¼å¼ï¼Œå…¶ä¸­ Xã€Y å’Œ Z ä¸ºéè´Ÿçš„æ•´æ•°ã€‚X æ˜¯ä¸»ç‰ˆæœ¬å·ã€Y æ˜¯æ¬¡ç‰ˆæœ¬å·ã€è€Œ Z ä¸ºä¿®è®¢å·ï¼Œè‹±æ–‡å¯¹åº”è¡¨ç¤ºä¸º majorã€minorã€patchï¼Œæ¯ä¸ªå·å¿…é¡»é‡‡ç”¨é€’å¢ã€‚ 12X.Y.Z ===&gt; &#123;major&#125;.&#123;minor&#125;.&#123;patch&#125;2.4.1 è¿™ç§æ ¼å¼éƒ½æ˜¯æ­£å¼ç‰ˆï¼Œè€Œåœ¨æ­£å¼ç‰ˆå‘å¸ƒä¹‹å‰è¿˜ä¼šç»å†å„ç§å…ˆè¡Œç‰ˆæœ¬ï¼Œå…ˆè¡Œç‰ˆæœ¬å·ä¼šåœ¨åŸæœ‰çš„åŸºç¡€ä¸Šå¢åŠ ä¸€ä¸ªç‰ˆæœ¬å·æ ‡ç­¾ï¼Œå…ˆè¡Œç‰ˆæœ¬æ ¼å¼æ˜¯åœ¨ä¿®è®¢ç‰ˆæœ¬patchå·åé¢åŠ ä¸Šä¸€ä¸ª-è¿æ¥ï¼Œå†é€šè¿‡.è¿›è¡Œåˆ†å‰² 12# æ ¼å¼major.minor.patch-&#123;identifier&#125;.&#123;identifier&#125;.&#123;identifier&#125; é€šå¸¸ç¬¬ä¸€ä¸ª identifier ä¸ºç‰ˆæœ¬å·æ ‡ç­¾ï¼Œåé¢åˆ™æ˜¯è‡ªå¢ç‰ˆæœ¬å·ã€‚ å¸¸ç”¨çš„ç‰ˆæœ¬å·æ ‡ç­¾æœ‰ alphaå†…éƒ¨æµ‹è¯•ç‰ˆ betaå…¬å¼€æµ‹è¯•ç‰ˆ rcå€™é€‰ç‰ˆæœ¬ å‘å¸ƒå…ˆè¡Œç‰ˆæœ¬ ç†è§£å®Œnpmç‰ˆæœ¬å·ç›¸å…³çŸ¥è¯†åï¼Œé‚£å¦‚ä½•å‘å¸ƒalphaã€betaã€rcç‰ˆæœ¬å‘¢ï¼Ÿ æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹pre-releases ï¼Œå°±æ˜¯é€šè¿‡ä¸åŒçš„å‘½ä»¤å»åˆ›å»ºå‘å¸ƒä¸åŒçš„ç‰ˆæœ¬ï¼Œæ¯”å¦‚æˆ‘ç°åœ¨éœ€è¦å‘å¸ƒbetaç‰ˆæœ¬ï¼Œå°±å¯ä»¥æ‰§è¡Œä¸€ä¸‹å‘½ä»¤ã€‚ 12345678âœ npx release-it major --preRelease=beta# å®é™…æ‰§è¡Œäº†ä¸‰æ­¥# 1.ç‰ˆæœ¬å·ä» 0.2.0 æ›´æ–°è‡³ 1.0.0-beta.0# 2.npmå‘å¸ƒç‰ˆæœ¬ä¼šæ‰“ä¸Šbetaæ ‡ç­¾ï¼Œå¯ä»¥é€šè¿‡ npm i xxxx@beta å®‰è£…# 3.github releaseä¼šæ‰“ä¸Špre-releaseæ ‡è¯†# ç»¼åˆèµ·æ¥å°±æ˜¯release-it premajor --preReleaseId=beta --npm.tag=beta --github.preRelease betaå¯ä»¥æ¢æˆ&quot;alpha&quot;, &quot;beta&quot;, &quot;rc&quot; majorå¯ä»¥æ›¿æ¢æˆmajorã€minorã€patch é¢„å‘å¸ƒç‰ˆæœ¬åœ¨æ›´æ”¹çš„è¿‡ç¨‹ä¸­ï¼ŒåŸæœ‰çš„å…ˆè¡Œç‰ˆæœ¬å·ä¼šæ¸…é›¶ã€‚æ¯”å¦‚æˆ‘ä»1.2.1-alpha.4å‡çº§åˆ°betaç‰ˆæœ¬ï¼Œå°±ä¼šå˜æˆ1.2.1-beta.0 å‡çº§ç‰ˆæœ¬æ—¶ï¼Œä¼šå°†é¢„å‘å¸ƒç‰ˆæœ¬æ¸…ç©ºï¼Œæ­¤æ—¶ç‰ˆæœ¬å·ä¸ä¼šå˜åŠ¨ã€‚æ¯”å¦‚æˆ‘ä¸Šä¸€ä¸ªç‰ˆæœ¬æ˜¯3.0.0-rc.2ï¼Œå½“æˆ‘ç›´æ¥å‡çº§patchå·å°±ä¼šå˜æˆ3.0.0 å‡çº§å½“å‰é¢„å‘å¸ƒç‰ˆæœ¬ 1âœ npx release-it --preRelease å°†alphaç‰ˆæœ¬ä¿®æ”¹ä¸ºbetaç‰ˆæœ¬ 1âœ npx release-it --preRelease=beta å‡çº§majorã€minorã€patchç‰ˆæœ¬å· 1âœ npx release-it major/minor/patch å½“æˆ‘ä»¬å‘å¸ƒå®Œåï¼Œéœ€è¦ä½¿ç”¨åˆ°é¢„å‘å¸ƒç‰ˆæœ¬ä¾èµ–äº‹ï¼Œå®‰è£…åŒ…çš„æ—¶å€™åŒ…ååé¢è¦å¸¦ä¸Š@betaæˆ–è€…æ˜¯å…¶ä»–ç‰ˆæœ¬ 1npm install release-it-test-wakaka@beta -D æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å‘½ä»¤æ‹†åˆ†å¼€æ¥ä½¿ç”¨ 12345678# åªå“åº”package.jsonä¸­çš„ç‰ˆæœ¬å·$ npx release-it major --preReleaseId=beta# è®¾ç½®npmå‘ç‰ˆæ—¶çš„æ ‡è¯†ä¸ºbeta$ npx release-it major --npm.tag=beta# è®¾ç½®github releaseä¸ºé¢„å‘å¸ƒ$ npx release-it major --github.preRelease æŸ¥çœ‹åŒ… æˆ‘ä»¬å‘å¸ƒå®Œä¹‹åï¼Œå¦‚ä½•æŸ¥çœ‹è‡ªå·±æ˜¯å¦å‘å¸ƒæˆåŠŸå‘¢ï¼Ÿæœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ npmå®˜ç½‘æŸ¥çœ‹ å¯ä»¥åœ¨npmå®˜ç½‘ä¸Šç›´æ¥æœç´¢åŒ…çš„åå­—ï¼Œæˆ–è€…æ˜¯ç™»å½•è´¦å·ååœ¨packagesä¸­æŸ¥çœ‹è‡ªå·±å‘å¸ƒçš„åŒ… åœ¨versionsä¸­å¯ä»¥çœ‹åˆ°å†å²çš„ç‰ˆæœ¬ ä½¿ç”¨npm viewå‘½ä»¤ 123456789101112131415# æŸ¥çœ‹æŸä¸ª package çš„æ³¨å†Œä¿¡æ¯npm view &lt;package-name&gt;# æŸ¥çœ‹æŸä¸ª package çš„æœ€æ–°ç‰ˆæœ¬npm view &lt;package-name&gt; version# æŸ¥çœ‹æŸä¸ª package åœ¨ npm æœåŠ¡å™¨ä¸Šæ‰€å‘å¸ƒè¿‡çš„ç‰ˆæœ¬npm view &lt;package-name&gt; versions# æŸ¥çœ‹ä»“åº“ä¾èµ–æ ‘ä¸Šæ‰€æœ‰åŒ…çš„ç‰ˆæœ¬ä¿¡æ¯npm ls ç›´æ¥å®‰è£… ç®€å•ç²—æš´ï¼Œç›´æ¥é€šè¿‡npm install &lt;package-name&gt;å®‰è£…ä¸€ä¸‹åŒ…ï¼Œå¦‚æœå‘å¸ƒæˆåŠŸï¼Œå®‰è£…æ—¶æœ€å¥½å¦èµ·é¡¹ç›®ï¼Œä¸è¦åœ¨å½“å‰åŒ…é¡¹ç›®ä¸­å®‰è£…ã€‚ è¸©å‘ åŒ…åé‡å¤ å‘åŒ…å‰ï¼Œæœ€å¥½ç¡®è®¤ä¸€ä¸‹åŒ…åæœ‰æ²¡æœ‰é‡å¤ï¼Œå¦‚æœåŒ…åé‡å¤æ˜¯æ— æ³•å‘å¸ƒçš„ã€‚æ ¡éªŒåŒ…åæœ€ç®€å•çš„åŠæ³•å°±æ˜¯å»npmå®˜ç½‘ä¸Šæœä½ éœ€è¦å‘å¸ƒçš„åå­—ï¼Œå¦‚æœæœ‰å°±éœ€è¦æ¢ä¸€ä¸ªåå­—ï¼Œæ²¡æœ‰å°±å¯ä»¥å‘å¸ƒã€‚ é”™è¯¯çš„åŒ…åï¼Œæ— æ³•å‘å¸ƒ ä¿®æ”¹åï¼Œå‘å¸ƒæˆåŠŸ æ²¡æœ‰gitä»“åº“æäº¤ä»£ç  åœ¨å®‰è£…å®Œ@release-it/conventional-changelogåï¼Œå¦‚æœæ²¡æœ‰åœ¨gitè¿œç¨‹ä»“åº“æäº¤ä»£ç ï¼Œä¹Ÿæ˜¯ä¼šå‘å¸ƒå¤±è´¥ æ·»åŠ è¿œç¨‹ä»“åº“å å½“æˆ‘ä»¬æ”¹å®Œä»£ç åï¼Œéœ€è¦è¿›è¡Œæäº¤ã€‚ 123git add .git commit -m &#x27;xxxxx&#x27;git push changelogæ–‡ä»¶æ²¡æœ‰commitä¿¡æ¯ ä¸ºä»€ä¹ˆæˆ‘æäº¤äº†commitï¼Œä½†æ˜¯ç”Ÿæˆçš„changelogä¸­æ²¡æœ‰commitä¿¡æ¯ï¼Ÿ è¿™æ˜¯å› ä¸ºæäº¤çš„commitä¿¡æ¯ä¸ç¬¦åˆangularè§„èŒƒï¼Œåœ¨.release-it.jsonæ–‡ä»¶ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ° 12345678... &quot;plugins&quot;: &#123; &quot;@release-it/conventional-changelog&quot;: &#123; &quot;preset&quot;: &quot;angular&quot;, &quot;infile&quot;: &quot;CHANGELOG.md&quot; &#125; &#125;... åªè¦æäº¤çš„è§„èŒƒç¬¦åˆangularè§„èŒƒï¼Œå°±å¯ä»¥äº†ã€‚ çº¦å®šå¼æäº¤ Angularæäº¤ä¿¡æ¯è§„èŒƒ @release-it/conventional-changelog æ€»ç»“ release-itä½¿ç”¨ä¸‹æ¥ï¼Œå‘ç°å®ƒå¸®æˆ‘ä»¬èŠ‚çœäº†å¾ˆå¤šæ—¶é—´ï¼Œæ•´ä½“å‘åŒ…æµç¨‹éƒ½å¾ˆè§„èŒƒã€‚ä¹‹å‰å·¥ä½œä¸­è¿›è¡Œå‘åŒ…çš„æ—¶å€™ï¼Œç›´æ¥ä¸€ä¸ªnpm publishå°±å®Œäº‹ï¼Œä¹Ÿæ²¡æœ‰è€ƒè™‘åˆ°æ‰“tagã€ç”Ÿæˆchangelogè¿™äº›äº‹æƒ…ã€‚è¿˜æœ‰æ›´å¤šæ‰©å±•æ€§åŠŸèƒ½ç­‰å¾…å‘ç°ï¼Œæ¯”å¦‚é…åˆä¸Šcommitizenç­‰å·¥å…·ï¼Œè‡ªå®šä¹‰commitä¿¡æ¯ï¼Œè®©changelogå†…å®¹æ›´ä¸°å¯Œã€‚é…åˆgit hooksï¼Œæ‰§è¡Œå…¶ä»–çš„ä¸€äº›æ“ä½œã€‚ åŒç±»å‹çš„äº§å“è¿˜æœ‰standard-versionï¼Œä¹Ÿæ˜¯æä¾›è‡ªåŠ¨åŒ–å‘åŒ…æµç¨‹ï¼Œä½†æ•´ä½“æ¥è¯´è¿˜æ˜¯release-itæ›´çµæ´»ä¸€äº›ã€‚ å‚è€ƒæ–‡ç«  package.json é…ç½®å®Œå…¨è§£è¯» å›¾æ–‡ç»“åˆç®€å•æ˜“å­¦çš„npm åŒ…çš„å‘å¸ƒæµç¨‹ èŠèŠ npm çš„è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemverï¼‰ è‡ªåŠ¨äº§å‡ºchangelog-ç¬¬äºŒèŠ‚ï¼šè‡ªåŠ¨äº§å‡º","categories":[{"name":"Git","slug":"Git","permalink":"https://wakaka378.github.io/categories/Git/"},{"name":"å·¥ç¨‹åŒ–","slug":"Git/å·¥ç¨‹åŒ–","permalink":"https://wakaka378.github.io/categories/Git/%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"npm","slug":"Git/å·¥ç¨‹åŒ–/npm","permalink":"https://wakaka378.github.io/categories/Git/%E5%B7%A5%E7%A8%8B%E5%8C%96/npm/"}],"tags":[{"name":"npm","slug":"npm","permalink":"https://wakaka378.github.io/tags/npm/"},{"name":"å·¥ç¨‹åŒ–","slug":"å·¥ç¨‹åŒ–","permalink":"https://wakaka378.github.io/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/"}]},{"title":"é˜²æŠ–debounceç†è§£","slug":"é˜²æŠ–debounceç†è§£","date":"2023-04-09T13:54:09.000Z","updated":"2023-04-18T12:13:20.878Z","comments":true,"path":"2023-04-09-é˜²æŠ–debounceç†è§£.html","link":"","permalink":"https://wakaka378.github.io/2023-04-09-%E9%98%B2%E6%8A%96debounce%E7%90%86%E8%A7%A3.html","excerpt":"","text":"ã€Œæˆ‘æ­£åœ¨å‚ä¸æ˜é‡‘ä¼šå‘˜ä¸“å±æ´»åŠ¨-æºç å…±è¯»ç¬¬ä¸€æœŸï¼Œç‚¹å‡»å‚ä¸ã€ å‰è¨€ é˜²æŠ–ç›¸ä¿¡å¤§å®¶éƒ½ä¸é™Œç”Ÿï¼Œé¢è¯•ä¸­ä¼šç»å¸¸ä¼šè¢«é—®é¢˜æˆ–æèµ·ã€‚æ¯”å¦‚ä¼šé—®ä¸€äº›å‰ç«¯ä¼˜åŒ–ã€æ‰‹å†™é˜²æŠ–èŠ‚æµå‡½æ•°ç­‰ç­‰ï¼Œè¿™é‡Œå°±è·Ÿç€underscore æºç æ¥å­¦ä¹ ä¸€ä¸‹ã€‚ å®šä¹‰ åœ¨è§„å®šæ—¶é—´åæ‰æ‰§è¡Œï¼Œå¦‚æœè§¦å‘åˆ™é‡æ–°è®¡æ—¶ ä¹Ÿå°±æ˜¯è¯´ï¼Œé˜²æŠ–å‡½æ•°åœ¨nç§’å†…ï¼Œæ— è®ºè§¦å‘äº†å¤šå°‘æ¬¡å‡½æ•°å›è°ƒï¼Œæˆ‘éƒ½åªåªåœ¨nç§’åæ‰§è¡Œä¸€æ¬¡ã€‚æ¯”å¦‚æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªç­‰å¾…æ—¶é—´ä¸º5ç§’çš„é˜²æŠ–å‡½æ•°ï¼Œå¦‚æœ5ç§’å†…æœ‰è§¦å‘ï¼Œå°±éœ€è¦é‡æ–°è®¡æ—¶ï¼Œç›´åˆ°5ç§’å†…æ²¡æœ‰è§¦å‘å°±è°ƒç”¨æ‰§è¡Œã€‚ ä½¿ç”¨åœºæ™¯ æœ€è¿‘é¡¹ç›®ä¸­æœ‰ä¸€ä¸ªè¡¨å•æœç´¢åœºæ™¯ï¼Œåœ¨è¾“å…¥æ–‡å­—çš„è¿‡ç¨‹ä¸­ä¼šæŒç»­è§¦å‘oninputäº‹ä»¶ï¼Œè€Œæœç´¢æ¥å£åªæ˜¯åœ¨ç”¨æˆ·è¾“å…¥æœç´¢æ–‡å­—åè¿›è¡Œè°ƒç”¨ã€‚å¦‚æœæ˜¯ç”¨æˆ·è¾“å…¥ä¸€ä¸ªæ–‡å­—å°±æœç´¢ä¸€æ¬¡ï¼Œä¸ä»…ä¼šé¢‘ç¹è°ƒç”¨åå°æ¥å£ï¼Œå‰ç«¯æ˜¾ç¤ºæ•ˆæœä¹Ÿä¸å¥½ã€‚ ä½¿ç”¨é˜²æŠ–çš„è¯ï¼Œå¯ä»¥å°†æ¥å£è°ƒç”¨è®¾å®šåœ¨500mså†…æ²¡æœ‰è§¦å‘oninputäº‹ä»¶åå†è°ƒç”¨æ¥å£ï¼Œè¿™æ ·å°±å¯ä»¥è§£å†³é—®é¢˜ã€‚ è¿˜ä¼šåœ¨å…¶ä»–åœºæ™¯ä½¿ç”¨ ä¸€äº›é¢‘ç¹ç‚¹å‡»æ“ä½œçš„æŒ‰é’®ï¼Œæ¯”å¦‚ç™»å½•ã€çŸ­ä¿¡éªŒè¯ï¼Œé¿å…ç”¨æˆ·çŸ­æ—¶é—´å¤šæ¬¡å‘é€ è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°æ—¶ï¼Œresize æ¬¡æ•°è¿‡äºé¢‘ç¹ï¼Œé€ æˆè®¡ç®—è¿‡å¤šï¼Œæ­¤æ—¶éœ€è¦ä¸€æ¬¡åˆ°ä½ï¼Œå°±ç”¨åˆ°äº†é˜²æŠ– é¼ æ ‡ç§»åŠ¨mousedownè®¡ç®—ç­‰åœºæ™¯ å®ç°åŸç† å®ç°åŸç†å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯åˆ©ç”¨å®šæ—¶å™¨ï¼Œå‡½æ•°åœ¨æœ€å¼€å§‹æ‰§è¡Œçš„æ—¶å€™å°±è®¾å®šä¸€ä¸ªå®šæ—¶å™¨ï¼Œå¦‚æœåœ¨nç§’å†…æœ‰æ‰§è¡Œå°±å§å®šæ—¶å™¨æ¸…ç©ºï¼Œé‡æ–°è®¾å®šä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ï¼Œå½“nç§’å†…æ²¡æœ‰å†è°ƒç”¨åï¼Œå®šæ—¶å™¨è®¡æ—¶ç»“æŸåå°±ä¼šè§¦å‘å›è°ƒã€‚ ç¬¬ä¸€ç‰ˆ 123456789101112131415161718192021/*** debounceé˜²æŠ–* @param &#123; function &#125; fn å›è°ƒ* @param &#123; number &#125; wait ç­‰å¾…æ—¶é—´*/function debounce(fn, wait = 300) &#123; // åˆ©ç”¨é—­åŒ…ç”Ÿæˆå”¯ä¸€çš„ä¸€ä¸ªå®šæ—¶å™¨ let timer = null; // è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå½“ä½œè§¦å‘äº‹ä»¶æ‰§è¡Œ return function (...args) &#123; if (timer) &#123; // ä¸Šä¸€æ¬¡å­˜åœ¨å®šæ—¶å™¨ï¼Œéœ€è¦æ¸…ç©º clearTimeout(timer); &#125; // è®¾å®šå®šæ—¶å™¨ï¼Œå®šæ—¶å™¨ç»“æŸåæ‰§è¡Œå›è°ƒå‡½æ•° fn å¦‚æœå¤šæ¬¡è§¦å‘å°±é‡æ–°è®¾å®š timer = setTimeout(() =&gt; &#123; fn.apply(this, args); &#125;, wait); &#125;;&#125; æˆ‘ä»¬å†å†™ä¸€ä¸ªè¾“å…¥æ¡†äº‹ä»¶æ¥æµ‹è¯•ä¸€ä¸‹ 123456789101112131415161718&lt;input type=&quot;text&quot; oninput=&quot;oninputHandler(event)&quot; /&gt;&lt;script&gt; const testFn = debounce((event) =&gt; &#123; console.log(&#x27;æ‰§è¡Œé˜²æŠ–&#x27;, event.target.value); &#125;, 1000); // æ‰§è¡Œé˜²æŠ– åœæ­¢ scroll äº‹ä»¶å 1 ç§’æ‰§è¡Œå›è°ƒ function oninputHandler(event) &#123; testFn(event); &#125; // ä¸æ‰§è¡Œé˜²æŠ– function oninputHandler(event) &#123; console.log(&#x27;input change value: &#x27; + event.target.value); &#125;&lt;/script&gt; è¿™æ˜¯æ²¡æœ‰æ‰§è¡Œé˜²æŠ– å¼€å¯é˜²æŠ–å æ•ˆæœè¿˜æ˜¯å¾ˆæ˜æ˜¾çš„ï¼Œä»åŸæ¥çš„è¾“å…¥ä¸€ä¸ªå€¼å°±è§¦å‘ï¼Œåˆ°ç°åœ¨1ç§’å†…æ²¡æœ‰è¾“å…¥æ‰è§¦å‘ï¼Œè‡³æ­¤ï¼Œç®€å•ç‰ˆé˜²æŠ–å°±å·²ç»å®ç°äº†ã€‚ ç¬¬äºŒç‰ˆ æ¥ä¸‹æ¥å†æ¥å¯¹é˜²æŠ–åšä¸€ä¸‹æ”¹é€ ï¼Œåœ¨é¦–æ¬¡è°ƒç”¨çš„æ—¶å€™ç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œç­‰åˆ°nç§’å†…æ²¡æœ‰è§¦å‘ï¼Œæ‰å¯ä»¥é‡æ–°è§¦å‘æ‰§è¡Œã€‚ å¬èµ·æ¥æœ‰ç‚¹ç»•ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨oninputäº‹ä»¶ç¬¬ä¸€æ¬¡è§¦å‘çš„æ—¶å€™å°±æ‰§è¡Œï¼Œåç»­çš„è§¦å‘éƒ½ä¸æ‰§è¡Œã€‚ç­‰åˆ°1ç§’å†…æ²¡æœ‰æ‰§è¡Œåï¼Œå†è§¦å‘oninputæ—¶åˆä¼šæ‰§è¡Œç¬¬ä¸€æ¬¡ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738/*** debounceé˜²æŠ–* @param &#123; function &#125; fn å›è°ƒ* @param &#123; number &#125; wait ç­‰å¾…æ—¶é—´* @param &#123; boolean &#125; immediate æ˜¯å¦ç«‹å³æ‰§è¡Œ*/function debounce(fn, wait = 300, immediate = false) &#123; // åˆ©ç”¨é—­åŒ…ç”Ÿæˆå”¯ä¸€çš„ä¸€ä¸ªå®šæ—¶å™¨ let timer = null; // è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå½“ä½œè§¦å‘äº‹ä»¶æ‰§è¡Œ return function (...args) &#123; if (timer) &#123; // ä¸Šä¸€æ¬¡å­˜åœ¨å®šæ—¶å™¨ï¼Œéœ€è¦æ¸…ç©º clearTimeout(timer); &#125; // immediate: true æ—¶ï¼Œé¦–æ¬¡è§¦å‘åç«‹å³æ‰§è¡Œ if (immediate) &#123; // æ˜¯å¦é¦–æ¬¡æ‰§è¡Œè¿‡ const isExecute = !timer; // èµ‹å€¼å®šæ—¶å™¨ é¿å…é‡å¤æ‰§è¡Œ timer = setTimeout(() =&gt; &#123; timer = null; &#125;, wait); // é¦–æ¬¡æ‰§è¡Œ isExecute &amp;&amp; fn.apply(this, args); &#125; else &#123; // è®¾å®šå®šæ—¶å™¨ï¼Œå®šæ—¶å™¨ç»“æŸåæ‰§è¡Œå›è°ƒå‡½æ•° fn å¦‚æœå¤šæ¬¡è§¦å‘å°±é‡æ–°è®¾å®š timer = setTimeout(() =&gt; &#123; fn.apply(this, args); &#125;, wait); &#125; &#125;;&#125; underscore æºç  æ¥çœ‹ä¸€ä¸‹underscoreé‡Œæ˜¯å¦‚ä½•å®ç°çš„ï¼Œå…ˆå°†æ ¸å¿ƒä»£ç å¤åˆ¶å‡ºæ¥ï¼Œç”¨ä¸Šé¢çš„oninputäº‹ä»¶æ¥è°ƒè¯•ï¼Œçœ‹ä¸€ä¸‹å®ƒçš„ä¸€ä¸ªå…·ä½“æ­¥éª¤ã€‚ åœ¨debouncedæ–¹æ³•å†…éƒ¨æ‰“ä¸Šä¸€ä¸ªæ–­ç‚¹ï¼Œç„¶ååœ¨è¾“å…¥æ¡†è¾“å…¥æ•°æ®è§¦å‘é˜²æŠ–ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748function debounce(func, wait, immediate) &#123; var timeout, previous, args, result, context; var later = function () &#123; // nowè·å–çš„æ˜¯å½“å‰æ—¶é—´ previous ä¼šåœ¨ç¬¬ä¸€æ¬¡è¿›å…¥çš„æ—¶å€™è®°å½• å¯¹æ¯”ä¸¤ä¸ªæ—¶é—´å·®æ˜¯å¦å°äº wait ç­‰å¾…æ—¶é—´ var passed = now() - previous; if (wait &gt; passed) &#123; // å°äºç­‰å¾…æ—¶é—´ è¯´æ˜åœ¨ waitæ—¶é—´å†…æœ‰è§¦å‘ é‡æ–°è®¾å®šå®šæ—¶å™¨ timeout = setTimeout(later, wait - passed); &#125; else &#123; // è¶…è¿‡ç­‰å¾…æ—¶é—´ æ‰§è¡Œå›è°ƒ // æ¸…ç©º timeout é¿å…å½±å“åˆ°ä¸‹æ¬¡ä½¿ç”¨ timeout = null; // åˆ¤æ–­æ˜¯å¦ç«‹å³æ‰§è¡Œ if (!immediate) result = func.apply(context, args); // This check is needed because `func` can recursively invoke `debounced`. // æ¸…ç©ºä¸Šä¸‹æ–‡ã€arguments å‚æ•° åœ¨å›è°ƒé‡Œé¢åµŒå¥—ä½¿ç”¨ if (!timeout) args = context = null; &#125; &#125;; // å…ˆæ‰§è¡Œè¿™é‡Œ é€šè¿‡ restArguments å°†å¤„ç†ç»“æœå½“ä½œå‡½æ•°è¿›è¡Œè¿”å› å›è°ƒæ—¶ä¼ é€’ arguments å‚æ•° var debounced = restArguments(function (_args) &#123; context = this; args = _args; // è§¦å‘ä¸€æ¬¡è®°å½•æ—¶é—´ ç”¨æ¥å’Œç­‰å¾…æ—¶é—´å¯¹æ¯” previous = now(); if (!timeout) &#123; // ç¬¬ä¸€æ¬¡è¿›å…¥æ—¶æ‰§è¡Œ // æ‰§è¡Œ later å‡½æ•° timeout = setTimeout(later, wait); // ç«‹å³æ‰§è¡Œ if (immediate) result = func.apply(context, args); &#125; return result; &#125;); // å–æ¶ˆæ‰§è¡Œ æ¸…ç©ºå®šæ—¶å™¨ç­‰å‚æ•° debounced.cancel = function () &#123; clearTimeout(timeout); timeout = args = context = null; &#125;; return debounced;&#125; æºç è¿˜æ˜¯æœ‰å¾ˆå¤šäº®ç‚¹çš„ å¢åŠ äº†cancelæ–¹æ³•ï¼Œå¯ä»¥éšæ—¶å–æ¶ˆã€‚ åœ¨æ‰§è¡Œå›è°ƒçš„æ—¶å€™ï¼Œå§å‡½æ•°ç»“æœå½“ä½œè¿”å›å€¼returnå‡ºå»ï¼Œæ˜¯ä¸ºäº†é¿å…å›è°ƒä¸­æœ‰è¿”å›æ•°æ®ã€‚ é€šè¿‡è®°å½•æ¯æ¬¡æ‰§è¡Œæ—¶é—´å·®ï¼Œæ¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰§è¡Œå›è°ƒã€‚","categories":[{"name":"js","slug":"js","permalink":"https://wakaka378.github.io/categories/js/"}],"tags":[{"name":"js","slug":"js","permalink":"https://wakaka378.github.io/tags/js/"},{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"æ€§èƒ½ä¼˜åŒ–","permalink":"https://wakaka378.github.io/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"},{"name":"èŠ‚æµé˜²æŠ–","slug":"èŠ‚æµé˜²æŠ–","permalink":"https://wakaka378.github.io/tags/%E8%8A%82%E6%B5%81%E9%98%B2%E6%8A%96/"}]},{"title":"vueä¸­ä½¿ç”¨vue-socket.ioçš„ä¸€äº›å¿ƒå¾—ã€è¸©å‘è®°å½•","slug":"vueä¸­ä½¿ç”¨vue-socket-ioçš„ä¸€äº›å¿ƒå¾—ã€è¸©å‘è®°å½•","date":"2023-04-09T11:56:28.000Z","updated":"2023-04-09T12:35:17.795Z","comments":true,"path":"2023-04-09-vueä¸­ä½¿ç”¨vue-socket-ioçš„ä¸€äº›å¿ƒå¾—ã€è¸©å‘è®°å½•.html","link":"","permalink":"https://wakaka378.github.io/2023-04-09-vue%E4%B8%AD%E4%BD%BF%E7%94%A8vue-socket-io%E7%9A%84%E4%B8%80%E4%BA%9B%E5%BF%83%E5%BE%97%E3%80%81%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95.html","excerpt":"","text":"å‰è¨€ vueé¡¹ç›®ä¸­æœ‰ä½¿ç”¨åˆ°socketé•¿è¿æ¥ï¼Œä¹‹å‰ä¸€ç›´éƒ½æ˜¯éƒ½æ˜¯ä½¿ç”¨vue-socke.io[githubåœ°å€]ï¼Œä½†æœ€è¿‘åœ¨ä½¿ç”¨æ—¶ï¼Œå‡ºäº†ä¸€äº›è«åå¥‡å¦™çš„bugï¼Œä¹Ÿæ˜¯ä¸ºæ­¤æ‰äº†ä¸å°‘å¤´å‘ï¼Œæœ€åè¿˜æ˜¯è§£å†³äº†ã€‚å…³äºsocketç›¸å…³å†…å®¹ä»‹ç»ä»¥åŠä½¿ç”¨åœºæ™¯ï¼Œè¿™é‡Œä¸ä¼šåšå¤ªå¤šä»‹ç»ï¼ˆä¸»è¦æ˜¯æ‡’ï¼‰ï¼Œå¯ä»¥ç¿»çœ‹å…¶ä»–æ–‡ç« ã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨ï¼Œä»¥åŠå†ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ä¸€äº›ä»€ä¹ˆã€‚å…³äºæ–‡ç« ä¸­ä½¿ç”¨çš„ä»£ç ï¼Œæˆ‘æ”¾ä¸Šgithubåœ°å€ã€‚å‰ç«¯å°é¸Ÿä¸€æšï¼Œç«‹èª“è¦æˆä¸ºå‰ç«¯èœé¸Ÿï¼Œä¸è¶³åœ°æ–¹ç•™è¨€æŒ‡å‡ºï¼Œå°å­è°¢è¿‡ã€‚ å®‰è£… è¿™é‡Œæˆ‘ä»¬å®‰è£…vue.socket.ioæ¨¡å—å’Œsocket.io-clientæ¨¡å—ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨socket.io-clientæ¨¡å—ï¼Œè¯·å¾€ä¸‹çœ‹ã€‚ 12345cnpm i vue-socket.io -Scnpm i socket.io-client -Syarn vue-socket.ioyarn i socket.io-client vue å®¢æˆ·ç«¯ä½¿ç”¨ ä½¿ç”¨socket.io-clientè¿æ¥ 1234567891011121314151617181920212223242526272829303132333435363738394041424344import Vue from &#x27;vue&#x27;import App from &#x27;./App.vue&#x27;import router from &#x27;./router&#x27;import store from &#x27;./store&#x27;import VueSocketIO from &#x27;vue-socket.io&#x27;import SocketIO from &quot;socket.io-client&quot;Vue.config.productionTip = false// socket è¿æ¥å‚æ•°const socketOptions = &#123; autoConnect: false, // è‡ªåŠ¨è¿æ¥ è¿™é‡Œä¸ºæˆ‘é¡¹ç›®éœ€æ±‚ éœ€è¦åœ¨æŒ‡å®šæƒ…å†µä¸‹æ‰è¿æ¥socket&#125;// æ³¨å†ŒVue.use( new VueSocketIO(&#123; debug: true , // debugè°ƒè¯•ï¼Œç”Ÿäº§å»ºè®®å…³é—­ connection: SocketIO(&quot;127.0.0.1:1024&quot;, socketOptions), store, // å¦‚æœæ²¡æœ‰ä½¿ç”¨åˆ°storeå¯ä»¥ä¸ç”¨å†™ &#125;))new Vue(&#123; // è¿™é‡Œä¸ºå…¨å±€ç›‘å¬socketäº‹ä»¶æ¶ˆæ¯ï¼Œç›‘å¬å‡½æ•°è¿™é‡Œåªå†™äº†ä¸€ç‚¹ï¼Œå…¶å®å¾ˆæœ‰å¾ˆå¤šäº‹ä»¶ã€‚ sockets: &#123; connecting() &#123; console.log(&#x27;æ­£åœ¨è¿æ¥&#x27;) &#125;, disconnect() &#123; console.log(&quot;Socket æ–­å¼€&quot;); &#125;, connect_failed() &#123; cosnole.log(&#x27;è¿æ¥å¤±è´¥&#x27;) &#125;, connect() &#123; console.log(&#x27;socket connected&#x27;) &#125; &#125;, router, store, render: h =&gt; h(App)&#125;).$mount(&#x27;#app&#x27;) å­—ç¬¦ä¸²è¿æ¥ å¦‚æœæ˜¯æ­£å¸¸ä½¿ç”¨ï¼Œé¡¹ç›®å¯åŠ¨å°±è¿æ¥socketï¼Œå¯ä»¥ä¸éœ€è¦åŠ è½½socket.io-clientæ¨¡å—ï¼Œç›´æ¥ä½¿ç”¨ã€‚ 12345678// æ³¨å†ŒVue.use( new VueSocketIO(&#123; debug: true , // debugè°ƒè¯•ï¼Œç”Ÿäº§å»ºè®®å…³é—­ connection: 127.0.0.1:1024, store, // å¦‚æœæ²¡æœ‰ä½¿ç”¨åˆ°storeå¯ä»¥ä¸ç”¨å†™ &#125;)) ç»„ä»¶ä¸­ä½¿ç”¨ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354&lt;template&gt; &lt;div id=&quot;app&quot;&gt; &lt;div id=&quot;nav&quot;&gt; &lt;button @click=&quot;connect&quot;&gt;è¿æ¥socket&lt;/button&gt; &lt;button @click=&quot;sendMessage&quot;&gt;å‘é€æ•°æ®&lt;/button&gt; &lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123; &#125; &#125;, methods:&#123; // è¿æ¥socket connect() &#123; this.$socket.open() // å¼€å§‹è¿æ¥socket // è®¢é˜…äº‹ä»¶ this.sockets.subscribe(&#x27;welcome&#x27;, data =&gt; &#123; console.log(&#x27;welcome data &#x27;, data) &#125;) &#125;, // å‘é€æ¶ˆæ¯ sendMessage() &#123; this.$socket.emit(&#x27;hello&#x27;, &#x27;è¿™é‡Œæ˜¯å®¢æˆ·ç«¯&#x27;) &#125; &#125;, sockets:&#123; // welcome: data =&gt; &#123; console.log(&#x27;welcome data &#x27;, data) &#125; &#125;&#125;&lt;/script&gt; å®¢æˆ·ç«¯ä½¿ç”¨æ€»ç»“ å®¢æˆ·ç«¯è‡ªå¸¦ç›‘å¬äº‹ä»¶ connectï¼šè¿æ¥æˆåŠŸ connectingï¼šæ­£åœ¨è¿æ¥ disconnectï¼šæ–­å¼€è¿æ¥ connect_failedï¼šè¿æ¥å¤±è´¥ errorï¼šé”™è¯¯å‘ç”Ÿï¼Œå¹¶ä¸”æ— æ³•è¢«å…¶ä»–äº‹ä»¶ç±»å‹æ‰€å¤„ç† reconnect_failedï¼šé‡è¿å¤±è´¥ reconnectï¼šæˆåŠŸé‡è¿ reconnectingï¼šæ­£åœ¨é‡è¿ ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶ å…¨å±€ç›‘å¬ 12345sockets:&#123; welcome: data =&gt; &#123; console.log(&#x27;welcome data&#x27;, data) &#125;&#125; ç»„ä»¶å†…ç›‘å¬ 123this.sockets.subscribe(&#x27;welcome&#x27;, data =&gt; &#123; console.log(&#x27;welcome&#x27;, data)&#125;) å‘é€æ¶ˆæ¯ æ³¨æ„ï¼šç›‘å¬ç”¨çš„æ˜¯this.socketsï¼Œå‘é€æ¶ˆæ¯æ˜¯this.$socketï¼Œä¸è¦å¼„æ··ã€‚ 1this.$socket.emit(&#x27;hello&#x27;, &#x27;è¿™é‡Œæ˜¯å®¢æˆ·ç«¯&#x27;) å…³äºè·¨åŸŸé—®é¢˜ socketä¼šå­˜åœ¨è·¨åŸŸé—®é¢˜ï¼Œä¹‹å‰çœ‹æ–‡ç« åˆè¯´åˆ°åœ¨vue.config.jsä¸­é…ç½®ä»£ç†ï¼Œå·®ä¸å¤šå’Œåå°æ¥å£ä»£ç†é…ç½®ä¸€æ ·ï¼Œä½†æˆ‘è¯•è¿‡å¥½åƒæ²¡å•¥é¸Ÿç”¨ï¼Œå¦‚æœæœ‰çŸ¥é“çš„åŒå­¦éº»çƒ¦ç•™è¨€å‘Šè¯‰ä¸€å£°ï¼Œå®é™…é¡¹ç›®ä¸­çš„è§£å†³æ–¹å¼è¿˜æ˜¯åç«¯é…ç½®è·¨åŸŸé—®é¢˜ã€‚ æœåŠ¡ç«¯ä½¿ç”¨ è¿™é‡Œä¸ºå•¥è¦è®²æœåŠ¡ç«¯ä½¿ç”¨ï¼Œä¸»è¦æ˜¯ä¸ºäº†è®©åŒå­¦æ›´å¥½çš„ä½“éªŒsocketï¼Œå…¶æ¬¡æ˜¯ä¸ºäº†å¼•å‡ºåé¢çš„bugï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ‰©å±•çŸ¥è¯†æŠŠï¼Œæ˜¯ä¸æ˜¯è§‰å¾—è‡ªå·±èµšäº†ğŸ˜„ã€‚æœ¬åœ°å¼€å¯socketæœåŠ¡å¯ä»¥æ›´å¥½çš„è¿›è¡Œè°ƒè¯•ã€‚æœåŠ¡ç«¯ä¸»è¦è¿˜æ˜¯ä½¿ç”¨nodeï¼Œæ¯•ç«Ÿå’±ä¹Ÿä¸ä¼šjavaã€pythonâ€¦ï¼Œè¿™é‡Œä»¥åŠé…ç½®äº†socketè·¨åŸŸã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152/* * @Descripttion: * @version: * @Author: fanliu * @Date: 2020-06-19 18:22 * @LastEditors: fanliu * @LastEditTime: 2020-06-19 18:30 */var http = require(&#x27;http&#x27;);var io = require(&#x27;socket.io&#x27;);// åˆ›å»ºserveræœåŠ¡var server = http.createServer(function (req, res) &#123; var headers = &#123;&#125;; headers[&quot;Access-Control-Allow-Origin&quot;] = &quot;*&quot;; headers[&quot;Access-Control-Allow-Methods&quot;] = &quot;POST, GET, PUT, DELETE, OPTIONS&quot;; headers[&quot;Access-Control-Allow-Credentials&quot;] = true; headers[&quot;Access-Control-Max-Age&quot;] = &#x27;86400&#x27;; // 24 hours headers[&quot;Access-Control-Allow-Headers&quot;] = &quot;X-Requested-With, Access-Control-Allow-Origin, X-HTTP-Method-Override, Content-Type, Authorization, Accept&quot;; res.writeHead(200, headers); res.end();&#125;);// å¯åŠ¨æœåŠ¡å™¨ ç›‘å¬ 1024 ç«¯å£server.listen(1024,function() &#123; console.log(&#x27;server runing at 127.0.0.1:1024&#x27;)&#125;)// å¯åŠ¨socketæœåŠ¡var socket = io.listen(server, &#123;origins: &#x27;*:*&#x27;&#125;);// ç›‘å¬å®¢æˆ·ç«¯è¿æ¥socket.on(&#x27;connection&#x27;,function(socket) &#123; console.log(&#x27;å®¢æˆ·ç«¯æœ‰è¿æ¥&#x27;) // ç›‘å¬å®¢æˆ·ç«¯æ–­å¼€ socket.on(&#x27;disconnect&#x27;, () =&gt; &#123; console.log(&#x27;å®¢æˆ·ç«¯æ–­å¼€&#x27;) &#125;) // ç»™å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ socket.emit(&#x27;welcome&#x27;,&#x27;æ¬¢è¿è¿æ¥socket&#x27;) // ç›‘å¬å®¢æˆ·ç«¯æ¶ˆæ¯ socket.on(&#x27;hello&#x27;, data =&gt; &#123; console.log(&#x27;æ¥æ”¶å®¢æˆ·ç«¯å‘é€æ•°æ®&#x27;, data) &#125;)&#125;); æœåŠ¡ç«¯æ€»ç»“ æœåŠ¡ç«¯æ¥æ”¶å’Œå‘é€æ¶ˆæ¯å’Œå®¢æˆ·ç«¯å¯¹è°ƒçš„ï¼Œå®¢æˆ·ç«¯emitå‘é€æ¶ˆæ¯ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯è¿™é‡Œå°±è¦onç›‘å¬å®¢æˆ·ç«¯å‘é€çš„æ¶ˆæ¯ï¼ŒæœåŠ¡çš„å‘é€åŒç†ã€‚ è¸©å‘ è®¢é˜…äº‹ä»¶è®°å¾—è¦å–æ¶ˆ socketä¸»è¦è¿˜æ˜¯ç”¨æ¥å†™èŠå¤©å®¤ï¼ŒåŠ å…¥socketæˆ¿é—´åè¦è®¢é˜…æˆ¿é—´å†…æ‰€æœ‰çš„èŠå¤©å†…å®¹ï¼Œè¿™æ—¶å¦‚æœæ²¡æœ‰å–æ¶ˆä¹‹å‰çš„è®¢é˜…äº‹ä»¶ï¼Œä¸‹æ¬¡è¿›å…¥ä¼šå¤šæ¬¡è®¢é˜…æ¶ˆæ¯ã€‚ä¹Ÿå°±æ˜¯åˆ«äººåªå‘ä¸€æ¡æ¶ˆæ¯ï¼Œä½ è¿™è¾¹æ¥æ”¶åˆ°çš„å´æ˜¯ä¸¤æ¡ç”šè‡³å¤šæ¡ã€‚å“ªå¦‚ä½•å–æ¶ˆè®¢é˜…å‘¢ï¼Œæˆ‘çš„å¤„ç†æ–¹å¼æ˜¯åœ¨ç¦»å¼€å½“å‰èŠå¤©é¡µé¢åï¼Œè‡ªåŠ¨å–æ¶ˆä¹‹å‰æ‰€æœ‰çš„è®¢é˜…äº‹ä»¶ã€‚ 123beforeDestroy() &#123; this.sockets.unsubscribe(eventName)&#125; åŒç†ï¼Œå¦‚æœæ˜¯æœ‰æŒ‡å®šé¡µé¢æ‰åŠ å…¥socketæˆ¿é—´ï¼Œé€€å‡ºé¡µé¢æ—¶ä¹Ÿè¦è®°å¾—å…³é—­socketè¿æ¥ã€‚æ¯”å¦‚ä½ åœ¨createdä¸­å¼€å§‹è¿æ¥socketï¼Œåœ¨beforeDestroyè¦è®°å¾—å…³é—­socketï¼Œä¸ç„¶ä¸‹æ¬¡è¿›å…¥ä¹Ÿä¼šè¿æ¥socketã€‚ 12345678created() &#123; this.$socket.open() // æŸ¥çœ‹socketæ˜¯å¦è¿æ¥æˆåŠŸ this.$socket.connected&#125;beforeDestroy() &#123; this.$socket.close()&#125; Type Error: this.sockets.subscribe is not a function è¿™æ˜¯æˆ‘æœ€è¿‘é‡åˆ°çš„é—®é¢˜ï¼ŒåŸæœ¬ä»¥ä¸ºæ˜¯è‡ªå·±çš„thisæŒ‡å‘æœ‰é—®é¢˜ï¼Œç„¶åä»åˆ°å°¾æŸ¥éäº†æ•´ä¸ªé€»è¾‘thisï¼Œå‘ç°å¹¶ä¸æ˜¯è¿™ä¸ªé—®é¢˜ã€‚ åœ¨æ‰“å°this.socketsä¹‹åæˆ‘å‘ç°é—®é¢˜ subscribeè®¢é˜…äº‹ä»¶å¹¶æ²¡æœ‰ç›´æ¥å­˜åœ¨ï¼Œè€Œæ˜¯æŸä¸ªå¯¹è±¡çš„å±æ€§ï¼Œäºæ˜¯å°è¯•äº†ä¸€ä¸‹this.sockets.listenner.subscribeå‘ç°èƒ½ç”¨äº†ã€‚ ä½ ä»¥ä¸ºè¿™å°±ç»“æŸäº†ï¼Ÿï¼Ÿï¼Ÿæ¥ç€æˆ‘åˆå‘ç°é—®é¢˜ 1234567sockets:&#123; welcome: data =&gt; &#123; console.log(&#x27;welcome data &#x27;, data) &#125;&#125; å¹¶ä¸”è®¢é˜…çš„äº‹ä»¶ä¸­ï¼Œsocketæ—¥å¿—æ˜¾ç¤ºcomponent: undefinedæ²¡æœ‰çœ‹åˆ°æ•°æ® å…¨å±€çš„è®¢é˜…äº‹ä»¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œå¹¶ä¸”socketè‡ªå¸¦çš„è¿æ¥äº‹ä»¶ä¹Ÿæ²¡æœ‰å¯åŠ¨æ‰“å°ã€‚æˆ‘ç›´æ¥å‚»äº†ğŸ˜¢ï¼Œä¹‹å‰ä½¿ç”¨çš„æ—¶å€™è¿˜æ²¡æœ‰è¿™äº›é—®é¢˜ï¼Œç™¾åº¦ä¸€å¤§å †æ— æœåï¼Œå¼€å§‹åƒå®˜æ–¹æ±‚åŠ©ã€‚äºæ˜¯æ‰¾åˆ°äº†é—®é¢˜ã€‚ Vue-Socket.io: #connect subscribe, component: undefined å¤§æ¦‚çš„æ„æ€æ˜¯è¯´ï¼Œå‡ºç°é—®é¢˜çš„éƒ½æ˜¯3.0.9çš„ç‰ˆæœ¬ï¼Œå°†ç‰ˆæœ¬åå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä¸ºå•¥è¦æŠŠsocketæœåŠ¡ç«¯å†™è¿›äº†çš„åŸå› ã€‚è‡ªå·±æœ¬åœ°å†™äº†ä¸€ä¸ªå°demoåï¼Œè¿˜çœŸçš„æ˜¯ç‰ˆæœ¬çš„é—®é¢˜ï¼Œéšåå°±æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚ æ€»ç»“ åŒå­¦ä»¬åœ¨ä½¿ç”¨vue-socket.ioæ—¶è¦æ³¨æ„ä¸€ä¸‹ç‰ˆæœ¬ï¼Œç°åœ¨çš„3.0.9å¤šå¤šå°‘å°‘ä¼šå‡ºç°é—®é¢˜ï¼Œå¯ä»¥é€‰æ‹©3.0.7ç‰ˆæœ¬ã€‚è¿™ä¸ªå¯ä»¥ä½¿ç”¨æ–‡ç« å¼€å¤´æˆ‘çš„æµ‹è¯•demoè¿›è¡ŒæŸ¥çœ‹ï¼ŒsocketæœåŠ¡ä»£ç ä¹Ÿåœ¨é¡¹ç›®ä¸­ã€‚ ç¬¬ä¸€æ¬¡åœ¨æ˜é‡‘ä¸­å‘è¡¨æ–‡ç« ï¼Œè¡¨è¾¾æœ‰é”™è¯¯çš„åœ°æ–¹è¿˜è¯·å¤šå¤šè°…è§£ï¼Œä¹‹åä¹Ÿä¼šå‘å¸ƒæ›´å¤šå‰ç«¯æŠ€æœ¯æ–‡ç« ï¼Œè¿˜è¯·å¤šå¤šå…³æ³¨ã€‚","categories":[{"name":"Vue","slug":"Vue","permalink":"https://wakaka378.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://wakaka378.github.io/tags/Vue/"},{"name":"socket.io","slug":"socket-io","permalink":"https://wakaka378.github.io/tags/socket-io/"}]}],"categories":[{"name":"Git","slug":"Git","permalink":"https://wakaka378.github.io/categories/Git/"},{"name":"å·¥ç¨‹åŒ–","slug":"Git/å·¥ç¨‹åŒ–","permalink":"https://wakaka378.github.io/categories/Git/%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"npm","slug":"Git/å·¥ç¨‹åŒ–/npm","permalink":"https://wakaka378.github.io/categories/Git/%E5%B7%A5%E7%A8%8B%E5%8C%96/npm/"},{"name":"js","slug":"js","permalink":"https://wakaka378.github.io/categories/js/"},{"name":"Vue","slug":"Vue","permalink":"https://wakaka378.github.io/categories/Vue/"}],"tags":[{"name":"npm","slug":"npm","permalink":"https://wakaka378.github.io/tags/npm/"},{"name":"å·¥ç¨‹åŒ–","slug":"å·¥ç¨‹åŒ–","permalink":"https://wakaka378.github.io/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"js","slug":"js","permalink":"https://wakaka378.github.io/tags/js/"},{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"æ€§èƒ½ä¼˜åŒ–","permalink":"https://wakaka378.github.io/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"},{"name":"èŠ‚æµé˜²æŠ–","slug":"èŠ‚æµé˜²æŠ–","permalink":"https://wakaka378.github.io/tags/%E8%8A%82%E6%B5%81%E9%98%B2%E6%8A%96/"},{"name":"Vue","slug":"Vue","permalink":"https://wakaka378.github.io/tags/Vue/"},{"name":"socket.io","slug":"socket-io","permalink":"https://wakaka378.github.io/tags/socket-io/"}]}