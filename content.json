{"meta":{"title":"Hexo","subtitle":"","description":"","author":"John Doe","url":"https://wakaka378.github.io","root":"/"},"pages":[{"title":"404 Not Foundï¼šè¯¥é¡µæ— æ³•æ˜¾ç¤º","date":"2023-04-09T10:55:30.353Z","updated":"2023-04-09T10:55:30.352Z","comments":false,"path":"/404.html","permalink":"https://wakaka378.github.io/404.html","excerpt":"","text":""},{"title":"å…³äº","date":"2023-04-09T10:55:30.400Z","updated":"2023-04-09T10:55:30.400Z","comments":false,"path":"about/index.html","permalink":"https://wakaka378.github.io/about/index.html","excerpt":"","text":"ä¸ªäººè¯¦ç»†ä»‹ç»"},{"title":"æ ‡ç­¾","date":"2023-04-09T10:55:30.548Z","updated":"2023-04-09T10:55:30.548Z","comments":false,"path":"tags/index.html","permalink":"https://wakaka378.github.io/tags/index.html","excerpt":"","text":""},{"title":"Repositories","date":"2023-04-09T10:54:23.884Z","updated":"2023-04-09T10:54:23.884Z","comments":false,"path":"repository/index.html","permalink":"https://wakaka378.github.io/repository/index.html","excerpt":"","text":""},{"title":"åˆ†ç±»","date":"2023-04-09T10:55:30.456Z","updated":"2023-04-09T10:55:30.456Z","comments":false,"path":"categories/index.html","permalink":"https://wakaka378.github.io/categories/index.html","excerpt":"","text":""},{"title":"ä¹¦å•","date":"2023-04-09T10:55:30.431Z","updated":"2023-04-09T10:55:30.431Z","comments":false,"path":"books/index.html","permalink":"https://wakaka378.github.io/books/index.html","excerpt":"","text":""},{"title":"å‹æƒ…é“¾æ¥","date":"2023-04-09T10:55:30.487Z","updated":"2023-04-09T10:55:30.487Z","comments":true,"path":"links/index.html","permalink":"https://wakaka378.github.io/links/index.html","excerpt":"","text":""}],"posts":[{"title":"é˜²æŠ–debounceç†è§£","slug":"é˜²æŠ–debounceç†è§£","date":"2023-04-09T13:54:09.000Z","updated":"2023-04-18T12:13:20.878Z","comments":true,"path":"2023-04-09-é˜²æŠ–debounceç†è§£.html","link":"","permalink":"https://wakaka378.github.io/2023-04-09-%E9%98%B2%E6%8A%96debounce%E7%90%86%E8%A7%A3.html","excerpt":"","text":"ã€Œæˆ‘æ­£åœ¨å‚ä¸æ˜é‡‘ä¼šå‘˜ä¸“å±æ´»åŠ¨-æºç å…±è¯»ç¬¬ä¸€æœŸï¼Œç‚¹å‡»å‚ä¸ã€ å‰è¨€ é˜²æŠ–ç›¸ä¿¡å¤§å®¶éƒ½ä¸é™Œç”Ÿï¼Œé¢è¯•ä¸­ä¼šç»å¸¸ä¼šè¢«é—®é¢˜æˆ–æèµ·ã€‚æ¯”å¦‚ä¼šé—®ä¸€äº›å‰ç«¯ä¼˜åŒ–ã€æ‰‹å†™é˜²æŠ–èŠ‚æµå‡½æ•°ç­‰ç­‰ï¼Œè¿™é‡Œå°±è·Ÿç€underscore æºç æ¥å­¦ä¹ ä¸€ä¸‹ã€‚ å®šä¹‰ åœ¨è§„å®šæ—¶é—´åæ‰æ‰§è¡Œï¼Œå¦‚æœè§¦å‘åˆ™é‡æ–°è®¡æ—¶ ä¹Ÿå°±æ˜¯è¯´ï¼Œé˜²æŠ–å‡½æ•°åœ¨nç§’å†…ï¼Œæ— è®ºè§¦å‘äº†å¤šå°‘æ¬¡å‡½æ•°å›è°ƒï¼Œæˆ‘éƒ½åªåªåœ¨nç§’åæ‰§è¡Œä¸€æ¬¡ã€‚æ¯”å¦‚æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªç­‰å¾…æ—¶é—´ä¸º5ç§’çš„é˜²æŠ–å‡½æ•°ï¼Œå¦‚æœ5ç§’å†…æœ‰è§¦å‘ï¼Œå°±éœ€è¦é‡æ–°è®¡æ—¶ï¼Œç›´åˆ°5ç§’å†…æ²¡æœ‰è§¦å‘å°±è°ƒç”¨æ‰§è¡Œã€‚ ä½¿ç”¨åœºæ™¯ æœ€è¿‘é¡¹ç›®ä¸­æœ‰ä¸€ä¸ªè¡¨å•æœç´¢åœºæ™¯ï¼Œåœ¨è¾“å…¥æ–‡å­—çš„è¿‡ç¨‹ä¸­ä¼šæŒç»­è§¦å‘oninputäº‹ä»¶ï¼Œè€Œæœç´¢æ¥å£åªæ˜¯åœ¨ç”¨æˆ·è¾“å…¥æœç´¢æ–‡å­—åè¿›è¡Œè°ƒç”¨ã€‚å¦‚æœæ˜¯ç”¨æˆ·è¾“å…¥ä¸€ä¸ªæ–‡å­—å°±æœç´¢ä¸€æ¬¡ï¼Œä¸ä»…ä¼šé¢‘ç¹è°ƒç”¨åå°æ¥å£ï¼Œå‰ç«¯æ˜¾ç¤ºæ•ˆæœä¹Ÿä¸å¥½ã€‚ ä½¿ç”¨é˜²æŠ–çš„è¯ï¼Œå¯ä»¥å°†æ¥å£è°ƒç”¨è®¾å®šåœ¨500mså†…æ²¡æœ‰è§¦å‘oninputäº‹ä»¶åå†è°ƒç”¨æ¥å£ï¼Œè¿™æ ·å°±å¯ä»¥è§£å†³é—®é¢˜ã€‚ è¿˜ä¼šåœ¨å…¶ä»–åœºæ™¯ä½¿ç”¨ ä¸€äº›é¢‘ç¹ç‚¹å‡»æ“ä½œçš„æŒ‰é’®ï¼Œæ¯”å¦‚ç™»å½•ã€çŸ­ä¿¡éªŒè¯ï¼Œé¿å…ç”¨æˆ·çŸ­æ—¶é—´å¤šæ¬¡å‘é€ è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°æ—¶ï¼Œresize æ¬¡æ•°è¿‡äºé¢‘ç¹ï¼Œé€ æˆè®¡ç®—è¿‡å¤šï¼Œæ­¤æ—¶éœ€è¦ä¸€æ¬¡åˆ°ä½ï¼Œå°±ç”¨åˆ°äº†é˜²æŠ– é¼ æ ‡ç§»åŠ¨mousedownè®¡ç®—ç­‰åœºæ™¯ å®ç°åŸç† å®ç°åŸç†å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯åˆ©ç”¨å®šæ—¶å™¨ï¼Œå‡½æ•°åœ¨æœ€å¼€å§‹æ‰§è¡Œçš„æ—¶å€™å°±è®¾å®šä¸€ä¸ªå®šæ—¶å™¨ï¼Œå¦‚æœåœ¨nç§’å†…æœ‰æ‰§è¡Œå°±å§å®šæ—¶å™¨æ¸…ç©ºï¼Œé‡æ–°è®¾å®šä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ï¼Œå½“nç§’å†…æ²¡æœ‰å†è°ƒç”¨åï¼Œå®šæ—¶å™¨è®¡æ—¶ç»“æŸåå°±ä¼šè§¦å‘å›è°ƒã€‚ ç¬¬ä¸€ç‰ˆ 123456789101112131415161718192021/*** debounceé˜²æŠ–* @param &#123; function &#125; fn å›è°ƒ* @param &#123; number &#125; wait ç­‰å¾…æ—¶é—´*/function debounce(fn, wait = 300) &#123; // åˆ©ç”¨é—­åŒ…ç”Ÿæˆå”¯ä¸€çš„ä¸€ä¸ªå®šæ—¶å™¨ let timer = null; // è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå½“ä½œè§¦å‘äº‹ä»¶æ‰§è¡Œ return function (...args) &#123; if (timer) &#123; // ä¸Šä¸€æ¬¡å­˜åœ¨å®šæ—¶å™¨ï¼Œéœ€è¦æ¸…ç©º clearTimeout(timer); &#125; // è®¾å®šå®šæ—¶å™¨ï¼Œå®šæ—¶å™¨ç»“æŸåæ‰§è¡Œå›è°ƒå‡½æ•° fn å¦‚æœå¤šæ¬¡è§¦å‘å°±é‡æ–°è®¾å®š timer = setTimeout(() =&gt; &#123; fn.apply(this, args); &#125;, wait); &#125;;&#125; æˆ‘ä»¬å†å†™ä¸€ä¸ªè¾“å…¥æ¡†äº‹ä»¶æ¥æµ‹è¯•ä¸€ä¸‹ 123456789101112131415161718&lt;input type=&quot;text&quot; oninput=&quot;oninputHandler(event)&quot; /&gt;&lt;script&gt; const testFn = debounce((event) =&gt; &#123; console.log(&#x27;æ‰§è¡Œé˜²æŠ–&#x27;, event.target.value); &#125;, 1000); // æ‰§è¡Œé˜²æŠ– åœæ­¢ scroll äº‹ä»¶å 1 ç§’æ‰§è¡Œå›è°ƒ function oninputHandler(event) &#123; testFn(event); &#125; // ä¸æ‰§è¡Œé˜²æŠ– function oninputHandler(event) &#123; console.log(&#x27;input change value: &#x27; + event.target.value); &#125;&lt;/script&gt; è¿™æ˜¯æ²¡æœ‰æ‰§è¡Œé˜²æŠ– å¼€å¯é˜²æŠ–å æ•ˆæœè¿˜æ˜¯å¾ˆæ˜æ˜¾çš„ï¼Œä»åŸæ¥çš„è¾“å…¥ä¸€ä¸ªå€¼å°±è§¦å‘ï¼Œåˆ°ç°åœ¨1ç§’å†…æ²¡æœ‰è¾“å…¥æ‰è§¦å‘ï¼Œè‡³æ­¤ï¼Œç®€å•ç‰ˆé˜²æŠ–å°±å·²ç»å®ç°äº†ã€‚ ç¬¬äºŒç‰ˆ æ¥ä¸‹æ¥å†æ¥å¯¹é˜²æŠ–åšä¸€ä¸‹æ”¹é€ ï¼Œåœ¨é¦–æ¬¡è°ƒç”¨çš„æ—¶å€™ç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œç­‰åˆ°nç§’å†…æ²¡æœ‰è§¦å‘ï¼Œæ‰å¯ä»¥é‡æ–°è§¦å‘æ‰§è¡Œã€‚ å¬èµ·æ¥æœ‰ç‚¹ç»•ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨oninputäº‹ä»¶ç¬¬ä¸€æ¬¡è§¦å‘çš„æ—¶å€™å°±æ‰§è¡Œï¼Œåç»­çš„è§¦å‘éƒ½ä¸æ‰§è¡Œã€‚ç­‰åˆ°1ç§’å†…æ²¡æœ‰æ‰§è¡Œåï¼Œå†è§¦å‘oninputæ—¶åˆä¼šæ‰§è¡Œç¬¬ä¸€æ¬¡ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738/*** debounceé˜²æŠ–* @param &#123; function &#125; fn å›è°ƒ* @param &#123; number &#125; wait ç­‰å¾…æ—¶é—´* @param &#123; boolean &#125; immediate æ˜¯å¦ç«‹å³æ‰§è¡Œ*/function debounce(fn, wait = 300, immediate = false) &#123; // åˆ©ç”¨é—­åŒ…ç”Ÿæˆå”¯ä¸€çš„ä¸€ä¸ªå®šæ—¶å™¨ let timer = null; // è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå½“ä½œè§¦å‘äº‹ä»¶æ‰§è¡Œ return function (...args) &#123; if (timer) &#123; // ä¸Šä¸€æ¬¡å­˜åœ¨å®šæ—¶å™¨ï¼Œéœ€è¦æ¸…ç©º clearTimeout(timer); &#125; // immediate: true æ—¶ï¼Œé¦–æ¬¡è§¦å‘åç«‹å³æ‰§è¡Œ if (immediate) &#123; // æ˜¯å¦é¦–æ¬¡æ‰§è¡Œè¿‡ const isExecute = !timer; // èµ‹å€¼å®šæ—¶å™¨ é¿å…é‡å¤æ‰§è¡Œ timer = setTimeout(() =&gt; &#123; timer = null; &#125;, wait); // é¦–æ¬¡æ‰§è¡Œ isExecute &amp;&amp; fn.apply(this, args); &#125; else &#123; // è®¾å®šå®šæ—¶å™¨ï¼Œå®šæ—¶å™¨ç»“æŸåæ‰§è¡Œå›è°ƒå‡½æ•° fn å¦‚æœå¤šæ¬¡è§¦å‘å°±é‡æ–°è®¾å®š timer = setTimeout(() =&gt; &#123; fn.apply(this, args); &#125;, wait); &#125; &#125;;&#125; underscore æºç  æ¥çœ‹ä¸€ä¸‹underscoreé‡Œæ˜¯å¦‚ä½•å®ç°çš„ï¼Œå…ˆå°†æ ¸å¿ƒä»£ç å¤åˆ¶å‡ºæ¥ï¼Œç”¨ä¸Šé¢çš„oninputäº‹ä»¶æ¥è°ƒè¯•ï¼Œçœ‹ä¸€ä¸‹å®ƒçš„ä¸€ä¸ªå…·ä½“æ­¥éª¤ã€‚ åœ¨debouncedæ–¹æ³•å†…éƒ¨æ‰“ä¸Šä¸€ä¸ªæ–­ç‚¹ï¼Œç„¶ååœ¨è¾“å…¥æ¡†è¾“å…¥æ•°æ®è§¦å‘é˜²æŠ–ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748function debounce(func, wait, immediate) &#123; var timeout, previous, args, result, context; var later = function () &#123; // nowè·å–çš„æ˜¯å½“å‰æ—¶é—´ previous ä¼šåœ¨ç¬¬ä¸€æ¬¡è¿›å…¥çš„æ—¶å€™è®°å½• å¯¹æ¯”ä¸¤ä¸ªæ—¶é—´å·®æ˜¯å¦å°äº wait ç­‰å¾…æ—¶é—´ var passed = now() - previous; if (wait &gt; passed) &#123; // å°äºç­‰å¾…æ—¶é—´ è¯´æ˜åœ¨ waitæ—¶é—´å†…æœ‰è§¦å‘ é‡æ–°è®¾å®šå®šæ—¶å™¨ timeout = setTimeout(later, wait - passed); &#125; else &#123; // è¶…è¿‡ç­‰å¾…æ—¶é—´ æ‰§è¡Œå›è°ƒ // æ¸…ç©º timeout é¿å…å½±å“åˆ°ä¸‹æ¬¡ä½¿ç”¨ timeout = null; // åˆ¤æ–­æ˜¯å¦ç«‹å³æ‰§è¡Œ if (!immediate) result = func.apply(context, args); // This check is needed because `func` can recursively invoke `debounced`. // æ¸…ç©ºä¸Šä¸‹æ–‡ã€arguments å‚æ•° åœ¨å›è°ƒé‡Œé¢åµŒå¥—ä½¿ç”¨ if (!timeout) args = context = null; &#125; &#125;; // å…ˆæ‰§è¡Œè¿™é‡Œ é€šè¿‡ restArguments å°†å¤„ç†ç»“æœå½“ä½œå‡½æ•°è¿›è¡Œè¿”å› å›è°ƒæ—¶ä¼ é€’ arguments å‚æ•° var debounced = restArguments(function (_args) &#123; context = this; args = _args; // è§¦å‘ä¸€æ¬¡è®°å½•æ—¶é—´ ç”¨æ¥å’Œç­‰å¾…æ—¶é—´å¯¹æ¯” previous = now(); if (!timeout) &#123; // ç¬¬ä¸€æ¬¡è¿›å…¥æ—¶æ‰§è¡Œ // æ‰§è¡Œ later å‡½æ•° timeout = setTimeout(later, wait); // ç«‹å³æ‰§è¡Œ if (immediate) result = func.apply(context, args); &#125; return result; &#125;); // å–æ¶ˆæ‰§è¡Œ æ¸…ç©ºå®šæ—¶å™¨ç­‰å‚æ•° debounced.cancel = function () &#123; clearTimeout(timeout); timeout = args = context = null; &#125;; return debounced;&#125; æºç è¿˜æ˜¯æœ‰å¾ˆå¤šäº®ç‚¹çš„ å¢åŠ äº†cancelæ–¹æ³•ï¼Œå¯ä»¥éšæ—¶å–æ¶ˆã€‚ åœ¨æ‰§è¡Œå›è°ƒçš„æ—¶å€™ï¼Œå§å‡½æ•°ç»“æœå½“ä½œè¿”å›å€¼returnå‡ºå»ï¼Œæ˜¯ä¸ºäº†é¿å…å›è°ƒä¸­æœ‰è¿”å›æ•°æ®ã€‚ é€šè¿‡è®°å½•æ¯æ¬¡æ‰§è¡Œæ—¶é—´å·®ï¼Œæ¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰§è¡Œå›è°ƒã€‚","categories":[{"name":"js","slug":"js","permalink":"https://wakaka378.github.io/categories/js/"}],"tags":[{"name":"js","slug":"js","permalink":"https://wakaka378.github.io/tags/js/"},{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"æ€§èƒ½ä¼˜åŒ–","permalink":"https://wakaka378.github.io/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"},{"name":"èŠ‚æµé˜²æŠ–","slug":"èŠ‚æµé˜²æŠ–","permalink":"https://wakaka378.github.io/tags/%E8%8A%82%E6%B5%81%E9%98%B2%E6%8A%96/"}]},{"title":"vueä¸­ä½¿ç”¨vue-socket.ioçš„ä¸€äº›å¿ƒå¾—ã€è¸©å‘è®°å½•","slug":"vueä¸­ä½¿ç”¨vue-socket-ioçš„ä¸€äº›å¿ƒå¾—ã€è¸©å‘è®°å½•","date":"2023-04-09T11:56:28.000Z","updated":"2023-04-09T12:35:17.795Z","comments":true,"path":"2023-04-09-vueä¸­ä½¿ç”¨vue-socket-ioçš„ä¸€äº›å¿ƒå¾—ã€è¸©å‘è®°å½•.html","link":"","permalink":"https://wakaka378.github.io/2023-04-09-vue%E4%B8%AD%E4%BD%BF%E7%94%A8vue-socket-io%E7%9A%84%E4%B8%80%E4%BA%9B%E5%BF%83%E5%BE%97%E3%80%81%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95.html","excerpt":"","text":"å‰è¨€ vueé¡¹ç›®ä¸­æœ‰ä½¿ç”¨åˆ°socketé•¿è¿æ¥ï¼Œä¹‹å‰ä¸€ç›´éƒ½æ˜¯éƒ½æ˜¯ä½¿ç”¨vue-socke.io[githubåœ°å€]ï¼Œä½†æœ€è¿‘åœ¨ä½¿ç”¨æ—¶ï¼Œå‡ºäº†ä¸€äº›è«åå¥‡å¦™çš„bugï¼Œä¹Ÿæ˜¯ä¸ºæ­¤æ‰äº†ä¸å°‘å¤´å‘ï¼Œæœ€åè¿˜æ˜¯è§£å†³äº†ã€‚å…³äºsocketç›¸å…³å†…å®¹ä»‹ç»ä»¥åŠä½¿ç”¨åœºæ™¯ï¼Œè¿™é‡Œä¸ä¼šåšå¤ªå¤šä»‹ç»ï¼ˆä¸»è¦æ˜¯æ‡’ï¼‰ï¼Œå¯ä»¥ç¿»çœ‹å…¶ä»–æ–‡ç« ã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨ï¼Œä»¥åŠå†ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ä¸€äº›ä»€ä¹ˆã€‚å…³äºæ–‡ç« ä¸­ä½¿ç”¨çš„ä»£ç ï¼Œæˆ‘æ”¾ä¸Šgithubåœ°å€ã€‚å‰ç«¯å°é¸Ÿä¸€æšï¼Œç«‹èª“è¦æˆä¸ºå‰ç«¯èœé¸Ÿï¼Œä¸è¶³åœ°æ–¹ç•™è¨€æŒ‡å‡ºï¼Œå°å­è°¢è¿‡ã€‚ å®‰è£… è¿™é‡Œæˆ‘ä»¬å®‰è£…vue.socket.ioæ¨¡å—å’Œsocket.io-clientæ¨¡å—ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨socket.io-clientæ¨¡å—ï¼Œè¯·å¾€ä¸‹çœ‹ã€‚ 12345cnpm i vue-socket.io -Scnpm i socket.io-client -Syarn vue-socket.ioyarn i socket.io-client vue å®¢æˆ·ç«¯ä½¿ç”¨ ä½¿ç”¨socket.io-clientè¿æ¥ 1234567891011121314151617181920212223242526272829303132333435363738394041424344import Vue from &#x27;vue&#x27;import App from &#x27;./App.vue&#x27;import router from &#x27;./router&#x27;import store from &#x27;./store&#x27;import VueSocketIO from &#x27;vue-socket.io&#x27;import SocketIO from &quot;socket.io-client&quot;Vue.config.productionTip = false// socket è¿æ¥å‚æ•°const socketOptions = &#123; autoConnect: false, // è‡ªåŠ¨è¿æ¥ è¿™é‡Œä¸ºæˆ‘é¡¹ç›®éœ€æ±‚ éœ€è¦åœ¨æŒ‡å®šæƒ…å†µä¸‹æ‰è¿æ¥socket&#125;// æ³¨å†ŒVue.use( new VueSocketIO(&#123; debug: true , // debugè°ƒè¯•ï¼Œç”Ÿäº§å»ºè®®å…³é—­ connection: SocketIO(&quot;127.0.0.1:1024&quot;, socketOptions), store, // å¦‚æœæ²¡æœ‰ä½¿ç”¨åˆ°storeå¯ä»¥ä¸ç”¨å†™ &#125;))new Vue(&#123; // è¿™é‡Œä¸ºå…¨å±€ç›‘å¬socketäº‹ä»¶æ¶ˆæ¯ï¼Œç›‘å¬å‡½æ•°è¿™é‡Œåªå†™äº†ä¸€ç‚¹ï¼Œå…¶å®å¾ˆæœ‰å¾ˆå¤šäº‹ä»¶ã€‚ sockets: &#123; connecting() &#123; console.log(&#x27;æ­£åœ¨è¿æ¥&#x27;) &#125;, disconnect() &#123; console.log(&quot;Socket æ–­å¼€&quot;); &#125;, connect_failed() &#123; cosnole.log(&#x27;è¿æ¥å¤±è´¥&#x27;) &#125;, connect() &#123; console.log(&#x27;socket connected&#x27;) &#125; &#125;, router, store, render: h =&gt; h(App)&#125;).$mount(&#x27;#app&#x27;) å­—ç¬¦ä¸²è¿æ¥ å¦‚æœæ˜¯æ­£å¸¸ä½¿ç”¨ï¼Œé¡¹ç›®å¯åŠ¨å°±è¿æ¥socketï¼Œå¯ä»¥ä¸éœ€è¦åŠ è½½socket.io-clientæ¨¡å—ï¼Œç›´æ¥ä½¿ç”¨ã€‚ 12345678// æ³¨å†ŒVue.use( new VueSocketIO(&#123; debug: true , // debugè°ƒè¯•ï¼Œç”Ÿäº§å»ºè®®å…³é—­ connection: 127.0.0.1:1024, store, // å¦‚æœæ²¡æœ‰ä½¿ç”¨åˆ°storeå¯ä»¥ä¸ç”¨å†™ &#125;)) ç»„ä»¶ä¸­ä½¿ç”¨ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354&lt;template&gt; &lt;div id=&quot;app&quot;&gt; &lt;div id=&quot;nav&quot;&gt; &lt;button @click=&quot;connect&quot;&gt;è¿æ¥socket&lt;/button&gt; &lt;button @click=&quot;sendMessage&quot;&gt;å‘é€æ•°æ®&lt;/button&gt; &lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123; &#125; &#125;, methods:&#123; // è¿æ¥socket connect() &#123; this.$socket.open() // å¼€å§‹è¿æ¥socket // è®¢é˜…äº‹ä»¶ this.sockets.subscribe(&#x27;welcome&#x27;, data =&gt; &#123; console.log(&#x27;welcome data &#x27;, data) &#125;) &#125;, // å‘é€æ¶ˆæ¯ sendMessage() &#123; this.$socket.emit(&#x27;hello&#x27;, &#x27;è¿™é‡Œæ˜¯å®¢æˆ·ç«¯&#x27;) &#125; &#125;, sockets:&#123; // welcome: data =&gt; &#123; console.log(&#x27;welcome data &#x27;, data) &#125; &#125;&#125;&lt;/script&gt; å®¢æˆ·ç«¯ä½¿ç”¨æ€»ç»“ å®¢æˆ·ç«¯è‡ªå¸¦ç›‘å¬äº‹ä»¶ connectï¼šè¿æ¥æˆåŠŸ connectingï¼šæ­£åœ¨è¿æ¥ disconnectï¼šæ–­å¼€è¿æ¥ connect_failedï¼šè¿æ¥å¤±è´¥ errorï¼šé”™è¯¯å‘ç”Ÿï¼Œå¹¶ä¸”æ— æ³•è¢«å…¶ä»–äº‹ä»¶ç±»å‹æ‰€å¤„ç† reconnect_failedï¼šé‡è¿å¤±è´¥ reconnectï¼šæˆåŠŸé‡è¿ reconnectingï¼šæ­£åœ¨é‡è¿ ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶ å…¨å±€ç›‘å¬ 12345sockets:&#123; welcome: data =&gt; &#123; console.log(&#x27;welcome data&#x27;, data) &#125;&#125; ç»„ä»¶å†…ç›‘å¬ 123this.sockets.subscribe(&#x27;welcome&#x27;, data =&gt; &#123; console.log(&#x27;welcome&#x27;, data)&#125;) å‘é€æ¶ˆæ¯ æ³¨æ„ï¼šç›‘å¬ç”¨çš„æ˜¯this.socketsï¼Œå‘é€æ¶ˆæ¯æ˜¯this.$socketï¼Œä¸è¦å¼„æ··ã€‚ 1this.$socket.emit(&#x27;hello&#x27;, &#x27;è¿™é‡Œæ˜¯å®¢æˆ·ç«¯&#x27;) å…³äºè·¨åŸŸé—®é¢˜ socketä¼šå­˜åœ¨è·¨åŸŸé—®é¢˜ï¼Œä¹‹å‰çœ‹æ–‡ç« åˆè¯´åˆ°åœ¨vue.config.jsä¸­é…ç½®ä»£ç†ï¼Œå·®ä¸å¤šå’Œåå°æ¥å£ä»£ç†é…ç½®ä¸€æ ·ï¼Œä½†æˆ‘è¯•è¿‡å¥½åƒæ²¡å•¥é¸Ÿç”¨ï¼Œå¦‚æœæœ‰çŸ¥é“çš„åŒå­¦éº»çƒ¦ç•™è¨€å‘Šè¯‰ä¸€å£°ï¼Œå®é™…é¡¹ç›®ä¸­çš„è§£å†³æ–¹å¼è¿˜æ˜¯åç«¯é…ç½®è·¨åŸŸé—®é¢˜ã€‚ æœåŠ¡ç«¯ä½¿ç”¨ è¿™é‡Œä¸ºå•¥è¦è®²æœåŠ¡ç«¯ä½¿ç”¨ï¼Œä¸»è¦æ˜¯ä¸ºäº†è®©åŒå­¦æ›´å¥½çš„ä½“éªŒsocketï¼Œå…¶æ¬¡æ˜¯ä¸ºäº†å¼•å‡ºåé¢çš„bugï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ‰©å±•çŸ¥è¯†æŠŠï¼Œæ˜¯ä¸æ˜¯è§‰å¾—è‡ªå·±èµšäº†ğŸ˜„ã€‚æœ¬åœ°å¼€å¯socketæœåŠ¡å¯ä»¥æ›´å¥½çš„è¿›è¡Œè°ƒè¯•ã€‚æœåŠ¡ç«¯ä¸»è¦è¿˜æ˜¯ä½¿ç”¨nodeï¼Œæ¯•ç«Ÿå’±ä¹Ÿä¸ä¼šjavaã€pythonâ€¦ï¼Œè¿™é‡Œä»¥åŠé…ç½®äº†socketè·¨åŸŸã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152/* * @Descripttion: * @version: * @Author: fanliu * @Date: 2020-06-19 18:22 * @LastEditors: fanliu * @LastEditTime: 2020-06-19 18:30 */var http = require(&#x27;http&#x27;);var io = require(&#x27;socket.io&#x27;);// åˆ›å»ºserveræœåŠ¡var server = http.createServer(function (req, res) &#123; var headers = &#123;&#125;; headers[&quot;Access-Control-Allow-Origin&quot;] = &quot;*&quot;; headers[&quot;Access-Control-Allow-Methods&quot;] = &quot;POST, GET, PUT, DELETE, OPTIONS&quot;; headers[&quot;Access-Control-Allow-Credentials&quot;] = true; headers[&quot;Access-Control-Max-Age&quot;] = &#x27;86400&#x27;; // 24 hours headers[&quot;Access-Control-Allow-Headers&quot;] = &quot;X-Requested-With, Access-Control-Allow-Origin, X-HTTP-Method-Override, Content-Type, Authorization, Accept&quot;; res.writeHead(200, headers); res.end();&#125;);// å¯åŠ¨æœåŠ¡å™¨ ç›‘å¬ 1024 ç«¯å£server.listen(1024,function() &#123; console.log(&#x27;server runing at 127.0.0.1:1024&#x27;)&#125;)// å¯åŠ¨socketæœåŠ¡var socket = io.listen(server, &#123;origins: &#x27;*:*&#x27;&#125;);// ç›‘å¬å®¢æˆ·ç«¯è¿æ¥socket.on(&#x27;connection&#x27;,function(socket) &#123; console.log(&#x27;å®¢æˆ·ç«¯æœ‰è¿æ¥&#x27;) // ç›‘å¬å®¢æˆ·ç«¯æ–­å¼€ socket.on(&#x27;disconnect&#x27;, () =&gt; &#123; console.log(&#x27;å®¢æˆ·ç«¯æ–­å¼€&#x27;) &#125;) // ç»™å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ socket.emit(&#x27;welcome&#x27;,&#x27;æ¬¢è¿è¿æ¥socket&#x27;) // ç›‘å¬å®¢æˆ·ç«¯æ¶ˆæ¯ socket.on(&#x27;hello&#x27;, data =&gt; &#123; console.log(&#x27;æ¥æ”¶å®¢æˆ·ç«¯å‘é€æ•°æ®&#x27;, data) &#125;)&#125;); æœåŠ¡ç«¯æ€»ç»“ æœåŠ¡ç«¯æ¥æ”¶å’Œå‘é€æ¶ˆæ¯å’Œå®¢æˆ·ç«¯å¯¹è°ƒçš„ï¼Œå®¢æˆ·ç«¯emitå‘é€æ¶ˆæ¯ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯è¿™é‡Œå°±è¦onç›‘å¬å®¢æˆ·ç«¯å‘é€çš„æ¶ˆæ¯ï¼ŒæœåŠ¡çš„å‘é€åŒç†ã€‚ è¸©å‘ è®¢é˜…äº‹ä»¶è®°å¾—è¦å–æ¶ˆ socketä¸»è¦è¿˜æ˜¯ç”¨æ¥å†™èŠå¤©å®¤ï¼ŒåŠ å…¥socketæˆ¿é—´åè¦è®¢é˜…æˆ¿é—´å†…æ‰€æœ‰çš„èŠå¤©å†…å®¹ï¼Œè¿™æ—¶å¦‚æœæ²¡æœ‰å–æ¶ˆä¹‹å‰çš„è®¢é˜…äº‹ä»¶ï¼Œä¸‹æ¬¡è¿›å…¥ä¼šå¤šæ¬¡è®¢é˜…æ¶ˆæ¯ã€‚ä¹Ÿå°±æ˜¯åˆ«äººåªå‘ä¸€æ¡æ¶ˆæ¯ï¼Œä½ è¿™è¾¹æ¥æ”¶åˆ°çš„å´æ˜¯ä¸¤æ¡ç”šè‡³å¤šæ¡ã€‚å“ªå¦‚ä½•å–æ¶ˆè®¢é˜…å‘¢ï¼Œæˆ‘çš„å¤„ç†æ–¹å¼æ˜¯åœ¨ç¦»å¼€å½“å‰èŠå¤©é¡µé¢åï¼Œè‡ªåŠ¨å–æ¶ˆä¹‹å‰æ‰€æœ‰çš„è®¢é˜…äº‹ä»¶ã€‚ 123beforeDestroy() &#123; this.sockets.unsubscribe(eventName)&#125; åŒç†ï¼Œå¦‚æœæ˜¯æœ‰æŒ‡å®šé¡µé¢æ‰åŠ å…¥socketæˆ¿é—´ï¼Œé€€å‡ºé¡µé¢æ—¶ä¹Ÿè¦è®°å¾—å…³é—­socketè¿æ¥ã€‚æ¯”å¦‚ä½ åœ¨createdä¸­å¼€å§‹è¿æ¥socketï¼Œåœ¨beforeDestroyè¦è®°å¾—å…³é—­socketï¼Œä¸ç„¶ä¸‹æ¬¡è¿›å…¥ä¹Ÿä¼šè¿æ¥socketã€‚ 12345678created() &#123; this.$socket.open() // æŸ¥çœ‹socketæ˜¯å¦è¿æ¥æˆåŠŸ this.$socket.connected&#125;beforeDestroy() &#123; this.$socket.close()&#125; Type Error: this.sockets.subscribe is not a function è¿™æ˜¯æˆ‘æœ€è¿‘é‡åˆ°çš„é—®é¢˜ï¼ŒåŸæœ¬ä»¥ä¸ºæ˜¯è‡ªå·±çš„thisæŒ‡å‘æœ‰é—®é¢˜ï¼Œç„¶åä»åˆ°å°¾æŸ¥éäº†æ•´ä¸ªé€»è¾‘thisï¼Œå‘ç°å¹¶ä¸æ˜¯è¿™ä¸ªé—®é¢˜ã€‚ åœ¨æ‰“å°this.socketsä¹‹åæˆ‘å‘ç°é—®é¢˜ subscribeè®¢é˜…äº‹ä»¶å¹¶æ²¡æœ‰ç›´æ¥å­˜åœ¨ï¼Œè€Œæ˜¯æŸä¸ªå¯¹è±¡çš„å±æ€§ï¼Œäºæ˜¯å°è¯•äº†ä¸€ä¸‹this.sockets.listenner.subscribeå‘ç°èƒ½ç”¨äº†ã€‚ ä½ ä»¥ä¸ºè¿™å°±ç»“æŸäº†ï¼Ÿï¼Ÿï¼Ÿæ¥ç€æˆ‘åˆå‘ç°é—®é¢˜ 1234567sockets:&#123; welcome: data =&gt; &#123; console.log(&#x27;welcome data &#x27;, data) &#125;&#125; å¹¶ä¸”è®¢é˜…çš„äº‹ä»¶ä¸­ï¼Œsocketæ—¥å¿—æ˜¾ç¤ºcomponent: undefinedæ²¡æœ‰çœ‹åˆ°æ•°æ® å…¨å±€çš„è®¢é˜…äº‹ä»¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œå¹¶ä¸”socketè‡ªå¸¦çš„è¿æ¥äº‹ä»¶ä¹Ÿæ²¡æœ‰å¯åŠ¨æ‰“å°ã€‚æˆ‘ç›´æ¥å‚»äº†ğŸ˜¢ï¼Œä¹‹å‰ä½¿ç”¨çš„æ—¶å€™è¿˜æ²¡æœ‰è¿™äº›é—®é¢˜ï¼Œç™¾åº¦ä¸€å¤§å †æ— æœåï¼Œå¼€å§‹åƒå®˜æ–¹æ±‚åŠ©ã€‚äºæ˜¯æ‰¾åˆ°äº†é—®é¢˜ã€‚ Vue-Socket.io: #connect subscribe, component: undefined å¤§æ¦‚çš„æ„æ€æ˜¯è¯´ï¼Œå‡ºç°é—®é¢˜çš„éƒ½æ˜¯3.0.9çš„ç‰ˆæœ¬ï¼Œå°†ç‰ˆæœ¬åå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä¸ºå•¥è¦æŠŠsocketæœåŠ¡ç«¯å†™è¿›äº†çš„åŸå› ã€‚è‡ªå·±æœ¬åœ°å†™äº†ä¸€ä¸ªå°demoåï¼Œè¿˜çœŸçš„æ˜¯ç‰ˆæœ¬çš„é—®é¢˜ï¼Œéšåå°±æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚ æ€»ç»“ åŒå­¦ä»¬åœ¨ä½¿ç”¨vue-socket.ioæ—¶è¦æ³¨æ„ä¸€ä¸‹ç‰ˆæœ¬ï¼Œç°åœ¨çš„3.0.9å¤šå¤šå°‘å°‘ä¼šå‡ºç°é—®é¢˜ï¼Œå¯ä»¥é€‰æ‹©3.0.7ç‰ˆæœ¬ã€‚è¿™ä¸ªå¯ä»¥ä½¿ç”¨æ–‡ç« å¼€å¤´æˆ‘çš„æµ‹è¯•demoè¿›è¡ŒæŸ¥çœ‹ï¼ŒsocketæœåŠ¡ä»£ç ä¹Ÿåœ¨é¡¹ç›®ä¸­ã€‚ ç¬¬ä¸€æ¬¡åœ¨æ˜é‡‘ä¸­å‘è¡¨æ–‡ç« ï¼Œè¡¨è¾¾æœ‰é”™è¯¯çš„åœ°æ–¹è¿˜è¯·å¤šå¤šè°…è§£ï¼Œä¹‹åä¹Ÿä¼šå‘å¸ƒæ›´å¤šå‰ç«¯æŠ€æœ¯æ–‡ç« ï¼Œè¿˜è¯·å¤šå¤šå…³æ³¨ã€‚","categories":[{"name":"Vue","slug":"Vue","permalink":"https://wakaka378.github.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://wakaka378.github.io/tags/Vue/"},{"name":"socket.io","slug":"socket-io","permalink":"https://wakaka378.github.io/tags/socket-io/"}]},{"title":"Hello World","slug":"hello-world","date":"2023-04-09T09:58:03.574Z","updated":"2023-04-09T12:01:37.950Z","comments":true,"path":"2023-04-09-hello-world.html","link":"","permalink":"https://wakaka378.github.io/2023-04-09-hello-world.html","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick Start Create a new post 1$ hexo new &quot;My New Post&quot; More info: Writing Run server 1$ hexo server More info: Server Generate static files 1$ hexo generate More info: Generating Deploy to remote sites 1$ hexo deploy More info: Deployment","categories":[],"tags":[]}],"categories":[{"name":"js","slug":"js","permalink":"https://wakaka378.github.io/categories/js/"},{"name":"Vue","slug":"Vue","permalink":"https://wakaka378.github.io/categories/Vue/"}],"tags":[{"name":"js","slug":"js","permalink":"https://wakaka378.github.io/tags/js/"},{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"æ€§èƒ½ä¼˜åŒ–","permalink":"https://wakaka378.github.io/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"},{"name":"èŠ‚æµé˜²æŠ–","slug":"èŠ‚æµé˜²æŠ–","permalink":"https://wakaka378.github.io/tags/%E8%8A%82%E6%B5%81%E9%98%B2%E6%8A%96/"},{"name":"Vue","slug":"Vue","permalink":"https://wakaka378.github.io/tags/Vue/"},{"name":"socket.io","slug":"socket-io","permalink":"https://wakaka378.github.io/tags/socket-io/"}]}