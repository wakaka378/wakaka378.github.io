<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexo</title>
  
  
  <link href="https://wakaka378.github.io/atom.xml" rel="self"/>
  
  <link href="https://wakaka378.github.io/"/>
  <updated>2023-04-18T12:13:20.878Z</updated>
  <id>https://wakaka378.github.io/</id>
  
  <author>
    <name>John Doe</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>é˜²æŠ–debounceç†è§£</title>
    <link href="https://wakaka378.github.io/2023-04-09-%E9%98%B2%E6%8A%96debounce%E7%90%86%E8%A7%A3.html"/>
    <id>https://wakaka378.github.io/2023-04-09-%E9%98%B2%E6%8A%96debounce%E7%90%86%E8%A7%A3.html</id>
    <published>2023-04-09T13:54:09.000Z</published>
    <updated>2023-04-18T12:13:20.878Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ebd170e14b414cc89fd50f01fdb78487~tplv-k3u1fbpfcp-watermark.image?" alt="" style="width:100%" /></p><blockquote><p>ã€Œæˆ‘æ­£åœ¨å‚ä¸æ˜é‡‘ä¼šå‘˜ä¸“å±æ´»åŠ¨-æºç å…±è¯»ç¬¬ä¸€æœŸï¼Œ<a href="https://juejin.cn/post/7169502488557518878" title="https://juejin.cn/post/7169502488557518878">ç‚¹å‡»å‚ä¸</a>ã€</p></blockquote><h1 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h1><p><strong>é˜²æŠ–</strong>ç›¸ä¿¡å¤§å®¶éƒ½ä¸é™Œç”Ÿï¼Œé¢è¯•ä¸­ä¼šç»å¸¸ä¼šè¢«é—®é¢˜æˆ–æèµ·ã€‚æ¯”å¦‚ä¼šé—®ä¸€äº›å‰ç«¯ä¼˜åŒ–ã€æ‰‹å†™<strong>é˜²æŠ–èŠ‚æµå‡½æ•°</strong>ç­‰ç­‰ï¼Œè¿™é‡Œå°±è·Ÿç€<a href="https://github.com/jashkenas/underscore/blob/master/modules/debounce.js">underscore</a> æºç æ¥å­¦ä¹ ä¸€ä¸‹ã€‚</p><h1 id="å®šä¹‰"><a class="markdownIt-Anchor" href="#å®šä¹‰"></a> å®šä¹‰</h1><p><strong>åœ¨è§„å®šæ—¶é—´åæ‰æ‰§è¡Œï¼Œå¦‚æœè§¦å‘åˆ™é‡æ–°è®¡æ—¶</strong><br />ä¹Ÿå°±æ˜¯è¯´ï¼Œé˜²æŠ–å‡½æ•°åœ¨nç§’å†…ï¼Œæ— è®ºè§¦å‘äº†å¤šå°‘æ¬¡å‡½æ•°å›è°ƒï¼Œæˆ‘éƒ½åªåªåœ¨nç§’åæ‰§è¡Œä¸€æ¬¡ã€‚æ¯”å¦‚æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªç­‰å¾…æ—¶é—´ä¸º5ç§’çš„é˜²æŠ–å‡½æ•°ï¼Œå¦‚æœ5ç§’å†…æœ‰è§¦å‘ï¼Œå°±éœ€è¦é‡æ–°è®¡æ—¶ï¼Œç›´åˆ°5ç§’å†…æ²¡æœ‰è§¦å‘å°±è°ƒç”¨æ‰§è¡Œã€‚</p><h1 id="ä½¿ç”¨åœºæ™¯"><a class="markdownIt-Anchor" href="#ä½¿ç”¨åœºæ™¯"></a> ä½¿ç”¨åœºæ™¯</h1><p>æœ€è¿‘é¡¹ç›®ä¸­æœ‰ä¸€ä¸ªè¡¨å•æœç´¢åœºæ™¯ï¼Œåœ¨è¾“å…¥æ–‡å­—çš„è¿‡ç¨‹ä¸­ä¼šæŒç»­è§¦å‘<code>oninput</code>äº‹ä»¶ï¼Œè€Œæœç´¢æ¥å£åªæ˜¯åœ¨ç”¨æˆ·è¾“å…¥æœç´¢æ–‡å­—åè¿›è¡Œè°ƒç”¨ã€‚å¦‚æœæ˜¯ç”¨æˆ·è¾“å…¥ä¸€ä¸ªæ–‡å­—å°±æœç´¢ä¸€æ¬¡ï¼Œä¸ä»…ä¼šé¢‘ç¹è°ƒç”¨åå°æ¥å£ï¼Œå‰ç«¯æ˜¾ç¤ºæ•ˆæœä¹Ÿä¸å¥½ã€‚</p><p>ä½¿ç”¨<strong>é˜²æŠ–</strong>çš„è¯ï¼Œå¯ä»¥å°†æ¥å£è°ƒç”¨è®¾å®šåœ¨<code>500ms</code>å†…æ²¡æœ‰è§¦å‘<code>oninput</code>äº‹ä»¶åå†è°ƒç”¨æ¥å£ï¼Œè¿™æ ·å°±å¯ä»¥è§£å†³é—®é¢˜ã€‚</p><p>è¿˜ä¼šåœ¨å…¶ä»–åœºæ™¯ä½¿ç”¨</p><ul><li>ä¸€äº›é¢‘ç¹ç‚¹å‡»æ“ä½œçš„æŒ‰é’®ï¼Œæ¯”å¦‚ç™»å½•ã€çŸ­ä¿¡éªŒè¯ï¼Œé¿å…ç”¨æˆ·çŸ­æ—¶é—´å¤šæ¬¡å‘é€</li><li>è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°æ—¶ï¼Œresize æ¬¡æ•°è¿‡äºé¢‘ç¹ï¼Œé€ æˆè®¡ç®—è¿‡å¤šï¼Œæ­¤æ—¶éœ€è¦ä¸€æ¬¡åˆ°ä½ï¼Œå°±ç”¨åˆ°äº†é˜²æŠ–</li><li>é¼ æ ‡ç§»åŠ¨<code>mousedown</code>è®¡ç®—ç­‰åœºæ™¯</li></ul><h1 id="å®ç°åŸç†"><a class="markdownIt-Anchor" href="#å®ç°åŸç†"></a> å®ç°åŸç†</h1><p>å®ç°åŸç†å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯åˆ©ç”¨å®šæ—¶å™¨ï¼Œå‡½æ•°åœ¨æœ€å¼€å§‹æ‰§è¡Œçš„æ—¶å€™å°±è®¾å®šä¸€ä¸ªå®šæ—¶å™¨ï¼Œå¦‚æœåœ¨nç§’å†…æœ‰æ‰§è¡Œå°±å§å®šæ—¶å™¨æ¸…ç©ºï¼Œé‡æ–°è®¾å®šä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ï¼Œå½“nç§’å†…æ²¡æœ‰å†è°ƒç”¨åï¼Œå®šæ—¶å™¨è®¡æ—¶ç»“æŸåå°±ä¼šè§¦å‘å›è°ƒã€‚</p><h1 id="ç¬¬ä¸€ç‰ˆ"><a class="markdownIt-Anchor" href="#ç¬¬ä¸€ç‰ˆ"></a> ç¬¬ä¸€ç‰ˆ</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* debounceé˜²æŠ–</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> &#123;<span class="type"> function </span>&#125; fn å›è°ƒ</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> &#123;<span class="type"> number </span>&#125; wait ç­‰å¾…æ—¶é—´</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, wait = <span class="number">300</span></span>) &#123;</span><br><span class="line">    <span class="comment">// åˆ©ç”¨é—­åŒ…ç”Ÿæˆå”¯ä¸€çš„ä¸€ä¸ªå®šæ—¶å™¨</span></span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå½“ä½œè§¦å‘äº‹ä»¶æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">        <span class="comment">// ä¸Šä¸€æ¬¡å­˜åœ¨å®šæ—¶å™¨ï¼Œéœ€è¦æ¸…ç©º</span></span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// è®¾å®šå®šæ—¶å™¨ï¼Œå®šæ—¶å™¨ç»“æŸåæ‰§è¡Œå›è°ƒå‡½æ•° fn  å¦‚æœå¤šæ¬¡è§¦å‘å°±é‡æ–°è®¾å®š</span></span><br><span class="line">      timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">      &#125;, wait);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å†å†™ä¸€ä¸ªè¾“å…¥æ¡†äº‹ä»¶æ¥æµ‹è¯•ä¸€ä¸‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> oninput=<span class="string">&quot;oninputHandler(event)&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> testFn = <span class="title function_">debounce</span>(<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ‰§è¡Œé˜²æŠ–&#x27;</span>, event.<span class="property">target</span>.<span class="property">value</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;, <span class="number">1000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// æ‰§è¡Œé˜²æŠ– åœæ­¢ scroll äº‹ä»¶å 1 ç§’æ‰§è¡Œå›è°ƒ</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">oninputHandler</span>(<span class="params">event</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">testFn</span>(event);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// ä¸æ‰§è¡Œé˜²æŠ–</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">oninputHandler</span>(<span class="params">event</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;input change value: &#x27;</span> + event.<span class="property">target</span>.<span class="property">value</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>è¿™æ˜¯æ²¡æœ‰æ‰§è¡Œé˜²æŠ–<br /><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5957c66dae0b4b6b89381351da99ae35~tplv-k3u1fbpfcp-watermark.image?" alt="Kapture 2022-12-04 at 21.56.21.gif" /></p><p>å¼€å¯é˜²æŠ–å<br /><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ebd170e14b414cc89fd50f01fdb78487~tplv-k3u1fbpfcp-watermark.image?" alt="Kapture 2022-12-04 at 21.57.44.gif" /></p><p>æ•ˆæœè¿˜æ˜¯å¾ˆæ˜æ˜¾çš„ï¼Œä»åŸæ¥çš„è¾“å…¥ä¸€ä¸ªå€¼å°±è§¦å‘ï¼Œåˆ°ç°åœ¨1ç§’å†…æ²¡æœ‰è¾“å…¥æ‰è§¦å‘ï¼Œè‡³æ­¤ï¼Œ<strong>ç®€å•ç‰ˆé˜²æŠ–</strong>å°±å·²ç»å®ç°äº†ã€‚</p><h1 id="ç¬¬äºŒç‰ˆ"><a class="markdownIt-Anchor" href="#ç¬¬äºŒç‰ˆ"></a> ç¬¬äºŒç‰ˆ</h1><p>æ¥ä¸‹æ¥å†æ¥å¯¹<strong>é˜²æŠ–</strong>åšä¸€ä¸‹æ”¹é€ ï¼Œåœ¨é¦–æ¬¡è°ƒç”¨çš„æ—¶å€™ç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œç­‰åˆ°nç§’å†…æ²¡æœ‰è§¦å‘ï¼Œæ‰å¯ä»¥é‡æ–°è§¦å‘æ‰§è¡Œã€‚</p><p>å¬èµ·æ¥æœ‰ç‚¹ç»•ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨<code>oninput</code>äº‹ä»¶ç¬¬ä¸€æ¬¡è§¦å‘çš„æ—¶å€™å°±æ‰§è¡Œï¼Œåç»­çš„è§¦å‘éƒ½ä¸æ‰§è¡Œã€‚ç­‰åˆ°1ç§’å†…æ²¡æœ‰æ‰§è¡Œåï¼Œå†è§¦å‘<code>oninput</code>æ—¶åˆä¼šæ‰§è¡Œç¬¬ä¸€æ¬¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* debounceé˜²æŠ–</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> &#123;<span class="type"> function </span>&#125; fn å›è°ƒ</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> &#123;<span class="type"> number </span>&#125; wait ç­‰å¾…æ—¶é—´</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> &#123;<span class="type"> boolean </span>&#125; immediate æ˜¯å¦ç«‹å³æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, wait = <span class="number">300</span>, immediate = <span class="literal">false</span></span>) &#123;</span><br><span class="line">    <span class="comment">// åˆ©ç”¨é—­åŒ…ç”Ÿæˆå”¯ä¸€çš„ä¸€ä¸ªå®šæ—¶å™¨</span></span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå½“ä½œè§¦å‘äº‹ä»¶æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">        <span class="comment">// ä¸Šä¸€æ¬¡å­˜åœ¨å®šæ—¶å™¨ï¼Œéœ€è¦æ¸…ç©º</span></span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// immediate: true æ—¶ï¼Œé¦–æ¬¡è§¦å‘åç«‹å³æ‰§è¡Œ</span></span><br><span class="line">      <span class="keyword">if</span> (immediate) &#123;</span><br><span class="line">        <span class="comment">// æ˜¯å¦é¦–æ¬¡æ‰§è¡Œè¿‡</span></span><br><span class="line">        <span class="keyword">const</span> isExecute = !timer;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// èµ‹å€¼å®šæ—¶å™¨ é¿å…é‡å¤æ‰§è¡Œ</span></span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          timer = <span class="literal">null</span>;</span><br><span class="line">        &#125;, wait);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é¦–æ¬¡æ‰§è¡Œ</span></span><br><span class="line">        isExecute &amp;&amp; fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// è®¾å®šå®šæ—¶å™¨ï¼Œå®šæ—¶å™¨ç»“æŸåæ‰§è¡Œå›è°ƒå‡½æ•° fn  å¦‚æœå¤šæ¬¡è§¦å‘å°±é‡æ–°è®¾å®š</span></span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">        &#125;, wait);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="underscore-æºç "><a class="markdownIt-Anchor" href="#underscore-æºç "></a> underscore æºç </h1><p>æ¥çœ‹ä¸€ä¸‹<a href="https://github.com/jashkenas/underscore">underscore</a>é‡Œæ˜¯å¦‚ä½•å®ç°çš„ï¼Œå…ˆå°†æ ¸å¿ƒä»£ç å¤åˆ¶å‡ºæ¥ï¼Œç”¨ä¸Šé¢çš„<code>oninput</code>äº‹ä»¶æ¥è°ƒè¯•ï¼Œçœ‹ä¸€ä¸‹å®ƒçš„ä¸€ä¸ªå…·ä½“æ­¥éª¤ã€‚</p><p>åœ¨<code>debounced</code>æ–¹æ³•å†…éƒ¨æ‰“ä¸Šä¸€ä¸ªæ–­ç‚¹ï¼Œç„¶ååœ¨è¾“å…¥æ¡†è¾“å…¥æ•°æ®è§¦å‘<strong>é˜²æŠ–</strong>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">func, wait, immediate</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> timeout, previous, args, result, context;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> later = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// nowè·å–çš„æ˜¯å½“å‰æ—¶é—´ previous ä¼šåœ¨ç¬¬ä¸€æ¬¡è¿›å…¥çš„æ—¶å€™è®°å½•  å¯¹æ¯”ä¸¤ä¸ªæ—¶é—´å·®æ˜¯å¦å°äº wait ç­‰å¾…æ—¶é—´</span></span><br><span class="line">    <span class="keyword">var</span> passed = <span class="title function_">now</span>() - previous;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (wait &gt; passed) &#123;</span><br><span class="line">      <span class="comment">// å°äºç­‰å¾…æ—¶é—´ è¯´æ˜åœ¨ waitæ—¶é—´å†…æœ‰è§¦å‘ é‡æ–°è®¾å®šå®šæ—¶å™¨</span></span><br><span class="line">      timeout = <span class="built_in">setTimeout</span>(later, wait - passed);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// è¶…è¿‡ç­‰å¾…æ—¶é—´ æ‰§è¡Œå›è°ƒ</span></span><br><span class="line">      <span class="comment">// æ¸…ç©º timeout  é¿å…å½±å“åˆ°ä¸‹æ¬¡ä½¿ç”¨</span></span><br><span class="line">      timeout = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// åˆ¤æ–­æ˜¯å¦ç«‹å³æ‰§è¡Œ</span></span><br><span class="line">      <span class="keyword">if</span> (!immediate) result = func.<span class="title function_">apply</span>(context, args);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// This check is needed because `func` can recursively invoke `debounced`.</span></span><br><span class="line">      <span class="comment">// æ¸…ç©ºä¸Šä¸‹æ–‡ã€arguments å‚æ•° åœ¨å›è°ƒé‡Œé¢åµŒå¥—ä½¿ç”¨</span></span><br><span class="line">      <span class="keyword">if</span> (!timeout) args = context = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// å…ˆæ‰§è¡Œè¿™é‡Œ  é€šè¿‡ restArguments å°†å¤„ç†ç»“æœå½“ä½œå‡½æ•°è¿›è¡Œè¿”å› å›è°ƒæ—¶ä¼ é€’ arguments å‚æ•°</span></span><br><span class="line">  <span class="keyword">var</span> debounced = <span class="title function_">restArguments</span>(<span class="keyword">function</span> (<span class="params">_args</span>) &#123;</span><br><span class="line">    context = <span class="variable language_">this</span>;</span><br><span class="line">    args = _args;</span><br><span class="line">    <span class="comment">// è§¦å‘ä¸€æ¬¡è®°å½•æ—¶é—´  ç”¨æ¥å’Œç­‰å¾…æ—¶é—´å¯¹æ¯”</span></span><br><span class="line">    previous = <span class="title function_">now</span>();</span><br><span class="line">    <span class="keyword">if</span> (!timeout) &#123;</span><br><span class="line">      <span class="comment">// ç¬¬ä¸€æ¬¡è¿›å…¥æ—¶æ‰§è¡Œ</span></span><br><span class="line">      <span class="comment">// æ‰§è¡Œ later å‡½æ•°</span></span><br><span class="line">      timeout = <span class="built_in">setTimeout</span>(later, wait);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ç«‹å³æ‰§è¡Œ</span></span><br><span class="line">      <span class="keyword">if</span> (immediate) result = func.<span class="title function_">apply</span>(context, args);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å–æ¶ˆæ‰§è¡Œ æ¸…ç©ºå®šæ—¶å™¨ç­‰å‚æ•°</span></span><br><span class="line">  debounced.<span class="property">cancel</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timeout);</span><br><span class="line">    timeout = args = context = <span class="literal">null</span>;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> debounced;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æºç è¿˜æ˜¯æœ‰å¾ˆå¤šäº®ç‚¹çš„</p><ul><li>å¢åŠ äº†<code>cancel</code>æ–¹æ³•ï¼Œå¯ä»¥éšæ—¶å–æ¶ˆã€‚</li><li>åœ¨æ‰§è¡Œå›è°ƒçš„æ—¶å€™ï¼Œå§å‡½æ•°ç»“æœå½“ä½œè¿”å›å€¼<code>return</code>å‡ºå»ï¼Œæ˜¯ä¸ºäº†é¿å…å›è°ƒä¸­æœ‰è¿”å›æ•°æ®ã€‚</li><li>é€šè¿‡è®°å½•æ¯æ¬¡æ‰§è¡Œæ—¶é—´å·®ï¼Œæ¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰§è¡Œå›è°ƒã€‚</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ebd170e14b414cc89fd50f01fdb78487~tplv-k3u1fbpfcp-watermark.image?
&quot; alt=&quot;&quot; st</summary>
      
    
    
    <content src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c3df9aaab1c149e0b7ed0a30b3fbcef9~tplv-k3u1fbpfcp-zoom-crop-mark:1512:1512:1512:851.awebp?" type="image"/>
    
    
    <category term="js" scheme="https://wakaka378.github.io/categories/js/"/>
    
    
    <category term="js" scheme="https://wakaka378.github.io/tags/js/"/>
    
    <category term="æ€§èƒ½ä¼˜åŒ–" scheme="https://wakaka378.github.io/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
    <category term="èŠ‚æµé˜²æŠ–" scheme="https://wakaka378.github.io/tags/%E8%8A%82%E6%B5%81%E9%98%B2%E6%8A%96/"/>
    
  </entry>
  
  <entry>
    <title>vueä¸­ä½¿ç”¨vue-socket.ioçš„ä¸€äº›å¿ƒå¾—ã€è¸©å‘è®°å½•</title>
    <link href="https://wakaka378.github.io/2023-04-09-vue%E4%B8%AD%E4%BD%BF%E7%94%A8vue-socket-io%E7%9A%84%E4%B8%80%E4%BA%9B%E5%BF%83%E5%BE%97%E3%80%81%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95.html"/>
    <id>https://wakaka378.github.io/2023-04-09-vue%E4%B8%AD%E4%BD%BF%E7%94%A8vue-socket-io%E7%9A%84%E4%B8%80%E4%BA%9B%E5%BF%83%E5%BE%97%E3%80%81%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95.html</id>
    <published>2023-04-09T11:56:28.000Z</published>
    <updated>2023-04-09T12:35:17.795Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h2><p>vueé¡¹ç›®ä¸­æœ‰ä½¿ç”¨åˆ°<code>socket</code>é•¿è¿æ¥ï¼Œä¹‹å‰ä¸€ç›´éƒ½æ˜¯éƒ½æ˜¯ä½¿ç”¨<code>vue-socke.io</code>[<a href="https://github.com/MetinSeylan/Vue-Socket.io">githubåœ°å€</a>]ï¼Œä½†æœ€è¿‘åœ¨ä½¿ç”¨æ—¶ï¼Œå‡ºäº†ä¸€äº›è«åå¥‡å¦™çš„bugï¼Œä¹Ÿæ˜¯ä¸ºæ­¤æ‰äº†ä¸å°‘å¤´å‘ï¼Œæœ€åè¿˜æ˜¯è§£å†³äº†ã€‚å…³äº<code>socket</code>ç›¸å…³å†…å®¹ä»‹ç»ä»¥åŠä½¿ç”¨åœºæ™¯ï¼Œè¿™é‡Œä¸ä¼šåšå¤ªå¤šä»‹ç»ï¼ˆä¸»è¦æ˜¯æ‡’ï¼‰ï¼Œå¯ä»¥ç¿»çœ‹å…¶ä»–æ–‡ç« ã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨ï¼Œä»¥åŠå†ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ä¸€äº›ä»€ä¹ˆã€‚å…³äºæ–‡ç« ä¸­ä½¿ç”¨çš„ä»£ç ï¼Œæˆ‘æ”¾ä¸Š<a href="https://github.com/gebilaofan/vue-socket.io-demo">github</a>åœ°å€ã€‚å‰ç«¯å°é¸Ÿä¸€æšï¼Œç«‹èª“è¦æˆä¸ºå‰ç«¯èœé¸Ÿï¼Œä¸è¶³åœ°æ–¹ç•™è¨€æŒ‡å‡ºï¼Œå°å­è°¢è¿‡ã€‚</p><h2 id="å®‰è£…"><a class="markdownIt-Anchor" href="#å®‰è£…"></a> å®‰è£…</h2><p>è¿™é‡Œæˆ‘ä»¬å®‰è£…<code>vue.socket.io</code>æ¨¡å—å’Œ<code>socket.io-client</code>æ¨¡å—ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨<code>socket.io-client</code>æ¨¡å—ï¼Œè¯·å¾€ä¸‹çœ‹ã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cnpm <span class="selector-tag">i</span> vue-socket<span class="selector-class">.io</span> -S</span><br><span class="line">cnpm <span class="selector-tag">i</span> socket<span class="selector-class">.io-client</span> -S</span><br><span class="line"></span><br><span class="line">yarn vue-socket<span class="selector-class">.io</span></span><br><span class="line">yarn <span class="selector-tag">i</span> socket.io-client</span><br></pre></td></tr></table></figure><h2 id="vue-å®¢æˆ·ç«¯ä½¿ç”¨"><a class="markdownIt-Anchor" href="#vue-å®¢æˆ·ç«¯ä½¿ç”¨"></a> vue å®¢æˆ·ç«¯ä½¿ç”¨</h2><ul><li>ä½¿ç”¨<code>socket.io-client</code>è¿æ¥</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueSocketIO</span> <span class="keyword">from</span> <span class="string">&#x27;vue-socket.io&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">SocketIO</span> <span class="keyword">from</span> <span class="string">&quot;socket.io-client&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// socket è¿æ¥å‚æ•°</span></span><br><span class="line"><span class="keyword">const</span> socketOptions = &#123;</span><br><span class="line">  <span class="attr">autoConnect</span>: <span class="literal">false</span>,       <span class="comment">// è‡ªåŠ¨è¿æ¥     è¿™é‡Œä¸ºæˆ‘é¡¹ç›®éœ€æ±‚  éœ€è¦åœ¨æŒ‡å®šæƒ…å†µä¸‹æ‰è¿æ¥socket</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨å†Œ</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">VueSocketIO</span>(&#123;</span><br><span class="line">    <span class="attr">debug</span>: <span class="literal">true</span> ,   <span class="comment">// debugè°ƒè¯•ï¼Œç”Ÿäº§å»ºè®®å…³é—­</span></span><br><span class="line">    <span class="attr">connection</span>: <span class="title class_">SocketIO</span>(<span class="string">&quot;127.0.0.1:1024&quot;</span>, socketOptions),</span><br><span class="line">    store,          <span class="comment">// å¦‚æœæ²¡æœ‰ä½¿ç”¨åˆ°storeå¯ä»¥ä¸ç”¨å†™</span></span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œä¸ºå…¨å±€ç›‘å¬socketäº‹ä»¶æ¶ˆæ¯ï¼Œç›‘å¬å‡½æ•°è¿™é‡Œåªå†™äº†ä¸€ç‚¹ï¼Œå…¶å®å¾ˆæœ‰å¾ˆå¤šäº‹ä»¶ã€‚</span></span><br><span class="line">  <span class="attr">sockets</span>: &#123;</span><br><span class="line">    <span class="title function_">connecting</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ­£åœ¨è¿æ¥&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">disconnect</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Socket æ–­å¼€&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">connect_failed</span>(<span class="params"></span>) &#123;</span><br><span class="line">      cosnole.<span class="title function_">log</span>(<span class="string">&#x27;è¿æ¥å¤±è´¥&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">connect</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;socket connected&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li><p>å­—ç¬¦ä¸²è¿æ¥</p><p>å¦‚æœæ˜¯æ­£å¸¸ä½¿ç”¨ï¼Œé¡¹ç›®å¯åŠ¨å°±è¿æ¥socketï¼Œå¯ä»¥ä¸éœ€è¦åŠ è½½<code>socket.io-client</code>æ¨¡å—ï¼Œç›´æ¥ä½¿ç”¨ã€‚</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨å†Œ</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">VueSocketIO</span>(&#123;</span><br><span class="line">    <span class="attr">debug</span>: <span class="literal">true</span> ,   <span class="comment">// debugè°ƒè¯•ï¼Œç”Ÿäº§å»ºè®®å…³é—­</span></span><br><span class="line">    <span class="attr">connection</span>: <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">1024</span>,</span><br><span class="line">    store,          <span class="comment">// å¦‚æœæ²¡æœ‰ä½¿ç”¨åˆ°storeå¯ä»¥ä¸ç”¨å†™</span></span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>ç»„ä»¶ä¸­ä½¿ç”¨</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;connect&quot;</span>&gt;</span>è¿æ¥socket<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sendMessage&quot;</span>&gt;</span>å‘é€æ•°æ®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// è¿æ¥socket</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">connect</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">$socket</span>.<span class="title function_">open</span>()       <span class="comment">// å¼€å§‹è¿æ¥socket</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// è®¢é˜…äº‹ä»¶</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">sockets</span>.<span class="title function_">subscribe</span>(<span class="string">&#x27;welcome&#x27;</span>, <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;welcome data &#x27;</span>, data)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;) </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// å‘é€æ¶ˆæ¯</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">sendMessage</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">$socket</span>.<span class="title function_">emit</span>(<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;è¿™é‡Œæ˜¯å®¢æˆ·ç«¯&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">sockets</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">welcome</span>: <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;welcome data &#x27;</span>, data)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å®¢æˆ·ç«¯ä½¿ç”¨æ€»ç»“"><a class="markdownIt-Anchor" href="#å®¢æˆ·ç«¯ä½¿ç”¨æ€»ç»“"></a> å®¢æˆ·ç«¯ä½¿ç”¨æ€»ç»“</h3><h4 id="å®¢æˆ·ç«¯è‡ªå¸¦ç›‘å¬äº‹ä»¶"><a class="markdownIt-Anchor" href="#å®¢æˆ·ç«¯è‡ªå¸¦ç›‘å¬äº‹ä»¶"></a> å®¢æˆ·ç«¯è‡ªå¸¦ç›‘å¬äº‹ä»¶</h4><ul><li>connectï¼šè¿æ¥æˆåŠŸ</li><li>connectingï¼šæ­£åœ¨è¿æ¥</li><li>disconnectï¼šæ–­å¼€è¿æ¥</li><li>connect_failedï¼šè¿æ¥å¤±è´¥</li><li>errorï¼šé”™è¯¯å‘ç”Ÿï¼Œå¹¶ä¸”æ— æ³•è¢«å…¶ä»–äº‹ä»¶ç±»å‹æ‰€å¤„ç†</li><li>reconnect_failedï¼šé‡è¿å¤±è´¥</li><li>reconnectï¼šæˆåŠŸé‡è¿</li><li>reconnectingï¼šæ­£åœ¨é‡è¿</li></ul><h4 id="ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶"><a class="markdownIt-Anchor" href="#ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶"></a> ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶</h4><ul><li>å…¨å±€ç›‘å¬</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sockets</span>:&#123;</span><br><span class="line">    <span class="attr">welcome</span>: <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;welcome data&#x27;</span>, data)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç»„ä»¶å†…ç›‘å¬</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">sockets</span>.<span class="title function_">subscribe</span>(<span class="string">&#x27;welcome&#x27;</span>, <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;welcome&#x27;</span>, data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="å‘é€æ¶ˆæ¯"><a class="markdownIt-Anchor" href="#å‘é€æ¶ˆæ¯"></a> å‘é€æ¶ˆæ¯</h4><p><strong>æ³¨æ„</strong>ï¼šç›‘å¬ç”¨çš„æ˜¯<code>this.sockets</code>ï¼Œå‘é€æ¶ˆæ¯æ˜¯<code>this.$socket</code>ï¼Œä¸è¦å¼„æ··ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$socket</span>.<span class="title function_">emit</span>(<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;è¿™é‡Œæ˜¯å®¢æˆ·ç«¯&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="å…³äºè·¨åŸŸé—®é¢˜"><a class="markdownIt-Anchor" href="#å…³äºè·¨åŸŸé—®é¢˜"></a> å…³äºè·¨åŸŸé—®é¢˜</h4><p>socketä¼šå­˜åœ¨è·¨åŸŸé—®é¢˜ï¼Œä¹‹å‰çœ‹æ–‡ç« åˆè¯´åˆ°åœ¨<code>vue.config.js</code>ä¸­é…ç½®ä»£ç†ï¼Œå·®ä¸å¤šå’Œåå°æ¥å£ä»£ç†é…ç½®ä¸€æ ·ï¼Œä½†æˆ‘è¯•è¿‡å¥½åƒæ²¡å•¥é¸Ÿç”¨ï¼Œå¦‚æœæœ‰çŸ¥é“çš„åŒå­¦éº»çƒ¦ç•™è¨€å‘Šè¯‰ä¸€å£°ï¼Œå®é™…é¡¹ç›®ä¸­çš„è§£å†³æ–¹å¼è¿˜æ˜¯åç«¯é…ç½®è·¨åŸŸé—®é¢˜ã€‚</p><h2 id="æœåŠ¡ç«¯ä½¿ç”¨"><a class="markdownIt-Anchor" href="#æœåŠ¡ç«¯ä½¿ç”¨"></a> æœåŠ¡ç«¯ä½¿ç”¨</h2><p>è¿™é‡Œä¸ºå•¥è¦è®²æœåŠ¡ç«¯ä½¿ç”¨ï¼Œä¸»è¦æ˜¯ä¸ºäº†è®©åŒå­¦æ›´å¥½çš„ä½“éªŒsocketï¼Œå…¶æ¬¡æ˜¯ä¸ºäº†å¼•å‡ºåé¢çš„bugï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ‰©å±•çŸ¥è¯†æŠŠï¼Œæ˜¯ä¸æ˜¯è§‰å¾—è‡ªå·±èµšäº†ğŸ˜„ã€‚æœ¬åœ°å¼€å¯socketæœåŠ¡å¯ä»¥æ›´å¥½çš„è¿›è¡Œè°ƒè¯•ã€‚æœåŠ¡ç«¯ä¸»è¦è¿˜æ˜¯ä½¿ç”¨<code>node</code>ï¼Œæ¯•ç«Ÿå’±ä¹Ÿä¸ä¼šjavaã€pythonâ€¦ï¼Œè¿™é‡Œä»¥åŠé…ç½®äº†socketè·¨åŸŸã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Descripttion: </span></span><br><span class="line"><span class="comment"> * @version: </span></span><br><span class="line"><span class="comment"> * @Author: fanliu</span></span><br><span class="line"><span class="comment"> * @Date: 2020-06-19 18:22</span></span><br><span class="line"><span class="comment"> * @LastEditors: fanliu</span></span><br><span class="line"><span class="comment"> * @LastEditTime: 2020-06-19 18:30</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> io = <span class="built_in">require</span>(<span class="string">&#x27;socket.io&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºserveræœåŠ¡</span></span><br><span class="line"><span class="keyword">var</span> server = http.<span class="title function_">createServer</span>(<span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> headers = &#123;&#125;;</span><br><span class="line">  headers[<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>] = <span class="string">&quot;*&quot;</span>;</span><br><span class="line">  headers[<span class="string">&quot;Access-Control-Allow-Methods&quot;</span>] = <span class="string">&quot;POST, GET, PUT, DELETE, OPTIONS&quot;</span>;</span><br><span class="line">  headers[<span class="string">&quot;Access-Control-Allow-Credentials&quot;</span>] = <span class="literal">true</span>;</span><br><span class="line">  headers[<span class="string">&quot;Access-Control-Max-Age&quot;</span>] = <span class="string">&#x27;86400&#x27;</span>; <span class="comment">// 24 hours</span></span><br><span class="line">  headers[<span class="string">&quot;Access-Control-Allow-Headers&quot;</span>] = <span class="string">&quot;X-Requested-With, Access-Control-Allow-Origin, X-HTTP-Method-Override, Content-Type, Authorization, Accept&quot;</span>;</span><br><span class="line">  res.<span class="title function_">writeHead</span>(<span class="number">200</span>, headers);</span><br><span class="line">  res.<span class="title function_">end</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨æœåŠ¡å™¨  ç›‘å¬ 1024 ç«¯å£</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">1024</span>,<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;server runing at 127.0.0.1:1024&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨socketæœåŠ¡</span></span><br><span class="line"><span class="keyword">var</span> socket = io.<span class="title function_">listen</span>(server, &#123;<span class="attr">origins</span>: <span class="string">&#x27;*:*&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬å®¢æˆ·ç«¯è¿æ¥</span></span><br><span class="line">socket.<span class="title function_">on</span>(<span class="string">&#x27;connection&#x27;</span>,<span class="keyword">function</span>(<span class="params">socket</span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å®¢æˆ·ç«¯æœ‰è¿æ¥&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬å®¢æˆ·ç«¯æ–­å¼€</span></span><br><span class="line">socket.<span class="title function_">on</span>(<span class="string">&#x27;disconnect&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å®¢æˆ·ç«¯æ–­å¼€&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»™å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯</span></span><br><span class="line">socket.<span class="title function_">emit</span>(<span class="string">&#x27;welcome&#x27;</span>,<span class="string">&#x27;æ¬¢è¿è¿æ¥socket&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">        <span class="comment">// ç›‘å¬å®¢æˆ·ç«¯æ¶ˆæ¯</span></span><br><span class="line">        socket.<span class="title function_">on</span>(<span class="string">&#x27;hello&#x27;</span>, <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ¥æ”¶å®¢æˆ·ç«¯å‘é€æ•°æ®&#x27;</span>, data)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æœåŠ¡ç«¯æ€»ç»“"><a class="markdownIt-Anchor" href="#æœåŠ¡ç«¯æ€»ç»“"></a> æœåŠ¡ç«¯æ€»ç»“</h3><p><strong>æœåŠ¡ç«¯æ¥æ”¶å’Œå‘é€æ¶ˆæ¯å’Œå®¢æˆ·ç«¯å¯¹è°ƒçš„</strong>ï¼Œå®¢æˆ·ç«¯<code>emit</code>å‘é€æ¶ˆæ¯ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯è¿™é‡Œå°±è¦<code>on</code>ç›‘å¬å®¢æˆ·ç«¯å‘é€çš„æ¶ˆæ¯ï¼ŒæœåŠ¡çš„å‘é€åŒç†ã€‚</p><h2 id="è¸©å‘"><a class="markdownIt-Anchor" href="#è¸©å‘"></a> è¸©å‘</h2><h3 id="è®¢é˜…äº‹ä»¶è®°å¾—è¦å–æ¶ˆ"><a class="markdownIt-Anchor" href="#è®¢é˜…äº‹ä»¶è®°å¾—è¦å–æ¶ˆ"></a> è®¢é˜…äº‹ä»¶è®°å¾—è¦å–æ¶ˆ</h3><p>socketä¸»è¦è¿˜æ˜¯ç”¨æ¥å†™èŠå¤©å®¤ï¼ŒåŠ å…¥socketæˆ¿é—´åè¦è®¢é˜…æˆ¿é—´å†…æ‰€æœ‰çš„èŠå¤©å†…å®¹ï¼Œè¿™æ—¶å¦‚æœæ²¡æœ‰å–æ¶ˆä¹‹å‰çš„è®¢é˜…äº‹ä»¶ï¼Œä¸‹æ¬¡è¿›å…¥ä¼šå¤šæ¬¡è®¢é˜…æ¶ˆæ¯ã€‚ä¹Ÿå°±æ˜¯åˆ«äººåªå‘ä¸€æ¡æ¶ˆæ¯ï¼Œä½ è¿™è¾¹æ¥æ”¶åˆ°çš„å´æ˜¯ä¸¤æ¡ç”šè‡³å¤šæ¡ã€‚å“ªå¦‚ä½•å–æ¶ˆè®¢é˜…å‘¢ï¼Œæˆ‘çš„å¤„ç†æ–¹å¼æ˜¯åœ¨ç¦»å¼€å½“å‰èŠå¤©é¡µé¢åï¼Œè‡ªåŠ¨å–æ¶ˆä¹‹å‰æ‰€æœ‰çš„è®¢é˜…äº‹ä»¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sockets</span>.<span class="title function_">unsubscribe</span>(eventName)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒç†ï¼Œå¦‚æœæ˜¯æœ‰æŒ‡å®šé¡µé¢æ‰åŠ å…¥socketæˆ¿é—´ï¼Œé€€å‡ºé¡µé¢æ—¶ä¹Ÿè¦è®°å¾—å…³é—­socketè¿æ¥ã€‚æ¯”å¦‚ä½ åœ¨<code>created</code>ä¸­å¼€å§‹è¿æ¥socketï¼Œåœ¨<code>beforeDestroy</code>è¦è®°å¾—å…³é—­socketï¼Œä¸ç„¶ä¸‹æ¬¡è¿›å…¥ä¹Ÿä¼šè¿æ¥socketã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$socket</span>.<span class="title function_">open</span>()</span><br><span class="line">    <span class="comment">// æŸ¥çœ‹socketæ˜¯å¦è¿æ¥æˆåŠŸ</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$socket</span>.<span class="property">connected</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$socket</span>.<span class="title function_">close</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="type-error-thissocketssubscribe-is-not-a-function"><a class="markdownIt-Anchor" href="#type-error-thissocketssubscribe-is-not-a-function"></a> Type Error: this.sockets.subscribe is not a function</h3><p>è¿™æ˜¯æˆ‘æœ€è¿‘é‡åˆ°çš„é—®é¢˜ï¼ŒåŸæœ¬ä»¥ä¸ºæ˜¯è‡ªå·±çš„thisæŒ‡å‘æœ‰é—®é¢˜ï¼Œç„¶åä»åˆ°å°¾æŸ¥éäº†æ•´ä¸ªé€»è¾‘thisï¼Œå‘ç°å¹¶ä¸æ˜¯è¿™ä¸ªé—®é¢˜ã€‚</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/6/20/172d0d9547cb4d71~tplv-t2oaga2asx-image.image" alt="" /></p><p>åœ¨æ‰“å°<code>this.sockets</code>ä¹‹åæˆ‘å‘ç°é—®é¢˜</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/6/20/172d0da331a5ad65~tplv-t2oaga2asx-image.image" alt="" /><br /><code>subscribe</code>è®¢é˜…äº‹ä»¶å¹¶æ²¡æœ‰ç›´æ¥å­˜åœ¨ï¼Œè€Œæ˜¯æŸä¸ªå¯¹è±¡çš„å±æ€§ï¼Œäºæ˜¯å°è¯•äº†ä¸€ä¸‹<code>this.sockets.listenner.subscribe</code>å‘ç°èƒ½ç”¨äº†ã€‚</p><p>ä½ ä»¥ä¸ºè¿™å°±ç»“æŸäº†ï¼Ÿï¼Ÿï¼Ÿæ¥ç€æˆ‘åˆå‘ç°é—®é¢˜</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sockets</span>:&#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">welcome</span>: <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;welcome data &#x27;</span>, data)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¹¶ä¸”è®¢é˜…çš„äº‹ä»¶ä¸­ï¼Œsocketæ—¥å¿—æ˜¾ç¤º<code>component: undefined</code>æ²¡æœ‰çœ‹åˆ°æ•°æ®</p><p>å…¨å±€çš„è®¢é˜…äº‹ä»¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œå¹¶ä¸”socketè‡ªå¸¦çš„è¿æ¥äº‹ä»¶ä¹Ÿæ²¡æœ‰å¯åŠ¨æ‰“å°ã€‚æˆ‘ç›´æ¥å‚»äº†ğŸ˜¢ï¼Œä¹‹å‰ä½¿ç”¨çš„æ—¶å€™è¿˜æ²¡æœ‰è¿™äº›é—®é¢˜ï¼Œç™¾åº¦ä¸€å¤§å †æ— æœåï¼Œå¼€å§‹åƒå®˜æ–¹æ±‚åŠ©ã€‚äºæ˜¯æ‰¾åˆ°äº†é—®é¢˜ã€‚<br /><a href="">Vue-Socket.io: #connect subscribe, component: undefined</a></p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/6/20/172d0de8634dcf66~tplv-t2oaga2asx-image.image" alt="" /></p><p>å¤§æ¦‚çš„æ„æ€æ˜¯è¯´ï¼Œå‡ºç°é—®é¢˜çš„éƒ½æ˜¯3.0.9çš„ç‰ˆæœ¬ï¼Œå°†ç‰ˆæœ¬åå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä¸ºå•¥è¦æŠŠsocketæœåŠ¡ç«¯å†™è¿›äº†çš„åŸå› ã€‚è‡ªå·±æœ¬åœ°å†™äº†ä¸€ä¸ªå°demoåï¼Œè¿˜çœŸçš„æ˜¯ç‰ˆæœ¬çš„é—®é¢˜ï¼Œéšåå°±æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚</p><h2 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“"></a> æ€»ç»“</h2><p>åŒå­¦ä»¬åœ¨ä½¿ç”¨vue-socket.ioæ—¶è¦æ³¨æ„ä¸€ä¸‹ç‰ˆæœ¬ï¼Œç°åœ¨çš„<code>3.0.9</code>å¤šå¤šå°‘å°‘ä¼šå‡ºç°é—®é¢˜ï¼Œå¯ä»¥é€‰æ‹©<code>3.0.7</code>ç‰ˆæœ¬ã€‚è¿™ä¸ªå¯ä»¥ä½¿ç”¨æ–‡ç« å¼€å¤´æˆ‘çš„æµ‹è¯•demoè¿›è¡ŒæŸ¥çœ‹ï¼ŒsocketæœåŠ¡ä»£ç ä¹Ÿåœ¨é¡¹ç›®ä¸­ã€‚<br />ç¬¬ä¸€æ¬¡åœ¨æ˜é‡‘ä¸­å‘è¡¨æ–‡ç« ï¼Œè¡¨è¾¾æœ‰é”™è¯¯çš„åœ°æ–¹è¿˜è¯·å¤šå¤šè°…è§£ï¼Œä¹‹åä¹Ÿä¼šå‘å¸ƒæ›´å¤šå‰ç«¯æŠ€æœ¯æ–‡ç« ï¼Œè¿˜è¯·å¤šå¤šå…³æ³¨ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#å‰è¨€&quot;&gt;&lt;/a&gt; å‰è¨€&lt;/h2&gt;
&lt;p&gt;vueé¡¹ç›®ä¸­æœ‰ä½¿ç”¨åˆ°&lt;code&gt;socket&lt;/code&gt;é•¿è¿æ¥ï¼Œä¹‹å‰ä¸€ç›´éƒ½æ˜¯éƒ½æ˜¯ä½¿ç”¨&lt;code&gt;vue-socke.io&lt;/code&gt;[&lt;a </summary>
      
    
    
    
    <category term="Vue" scheme="https://wakaka378.github.io/categories/Vue/"/>
    
    
    <category term="Vue" scheme="https://wakaka378.github.io/tags/Vue/"/>
    
    <category term="socket.io" scheme="https://wakaka378.github.io/tags/socket-io/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://wakaka378.github.io/2023-04-09-hello-world.html"/>
    <id>https://wakaka378.github.io/2023-04-09-hello-world.html</id>
    <published>2023-04-09T09:58:03.574Z</published>
    <updated>2023-04-09T12:01:37.950Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="quick-start"><a class="markdownIt-Anchor" href="#quick-start"></a> Quick Start</h2><h3 id="create-a-new-post"><a class="markdownIt-Anchor" href="#create-a-new-post"></a> Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="run-server"><a class="markdownIt-Anchor" href="#run-server"></a> Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="generate-static-files"><a class="markdownIt-Anchor" href="#generate-static-files"></a> Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="deploy-to-remote-sites"><a class="markdownIt-Anchor" href="#deploy-to-remote-sites"></a> Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
  </entry>
  
</feed>
