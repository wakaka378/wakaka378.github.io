<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>掘金自动签到➕定时执行➕邮箱推送 你还想要啥❓ | Wakaka378</title><meta name="description" content="掘金自动签到 ➕ 定时执行 ➕邮箱推送 你还想要啥❓   前言 冒着被关进小黑屋的风险  写了个掘金自动签到抽奖程序 包含了自动执行、签到、免费抽奖、沾喜气、邮件通知的脚本，以后再也不用每天忘记签到了😄 事情是这样的  元旦那天由于玩的太嗨 忘记了掘金签到这么一回事 作为一名专业的摸鱼🐟选手 怎么能断签呢（好吧 我是为了第二天5120矿石）果断买了补签卡 后来在想  为啥不写一个每天自动执行"><meta property="og:type" content="article"><meta property="og:title" content="掘金自动签到➕定时执行➕邮箱推送 你还想要啥❓"><meta property="og:url" content="https://wakaka378.github.io/692e96f41680.html"><meta property="og:site_name" content="Hexo"><meta property="og:description" content="掘金自动签到 ➕ 定时执行 ➕邮箱推送 你还想要啥❓   前言 冒着被关进小黑屋的风险  写了个掘金自动签到抽奖程序 包含了自动执行、签到、免费抽奖、沾喜气、邮件通知的脚本，以后再也不用每天忘记签到了😄 事情是这样的  元旦那天由于玩的太嗨 忘记了掘金签到这么一回事 作为一名专业的摸鱼🐟选手 怎么能断签呢（好吧 我是为了第二天5120矿石）果断买了补签卡 后来在想  为啥不写一个每天自动执行"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4a4f074044ab4321ad0675aab5d58a00~tplv-k3u1fbpfcp-zoom-crop-mark:1512:1512:1512:851.awebp?"><meta property="og:image" content="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2c842de5e857466c88d6bdb7486e7ae9~tplv-k3u1fbpfcp-watermark.image?"><meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b3d16490afb8465d93dcbf544497436d~tplv-k3u1fbpfcp-zoom-1.image"><meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9824a69bd1d14e24bdfdec640d590485~tplv-k3u1fbpfcp-zoom-1.image"><meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bccfbc6f48e74f9fa10f04d375df9044~tplv-k3u1fbpfcp-zoom-1.image"><meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/05b361b1ae8a48398aae7d64626e3534~tplv-k3u1fbpfcp-zoom-1.image"><meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/27da536385c044d6a185191e1ff76489~tplv-k3u1fbpfcp-zoom-1.image"><meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7f2a43fde0c54462a0e7de66287b88a5~tplv-k3u1fbpfcp-zoom-1.image"><meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ba37964d4e1c43dca962b5a5e13f4d5b~tplv-k3u1fbpfcp-watermark.image?"><meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bda476d9d0b945b58637d5d178bd5bf2~tplv-k3u1fbpfcp-zoom-1.image"><meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aacc559213ae4cb6bf9078929357c27f~tplv-k3u1fbpfcp-zoom-1.image"><meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/91221fa2088b453dadcbbd408872d045~tplv-k3u1fbpfcp-zoom-1.image"><meta property="article:published_time" content="2022-01-16T13:15:12.000Z"><meta property="article:modified_time" content="2023-06-14T13:15:58.139Z"><meta property="article:author" content="John Doe"><meta property="article:tag" content="Github"><meta property="article:tag" content="工具"><meta property="article:tag" content="Node"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4a4f074044ab4321ad0675aab5d58a00~tplv-k3u1fbpfcp-zoom-crop-mark:1512:1512:1512:851.awebp?"><link rel="canonical" href="https://wakaka378.github.io/692e96f41680.html"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 6.3.0"></head><body class="main-center" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/wakaka378" target="_blank"><img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">wakaka378</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">a Vuer</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Beijing, China</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="搜索"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav menu-highlight"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">首页</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">归档</span></a></li><li class="menu-item menu-item-categories"><a href="/categories"><i class="icon icon-folder"></i> <span class="menu-title">分类</span></a></li><li class="menu-item menu-item-tags"><a href="/tags"><i class="icon icon-tags"></i> <span class="menu-title">标签</span></a></li><li class="menu-item menu-item-repository"><a href="/repository"><i class="icon icon-project"></i> <span class="menu-title">项目</span></a></li><li class="menu-item menu-item-links"><a href="/links"><i class="icon icon-friendship"></i> <span class="menu-title">友链</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">关于</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/wakaka378" target="_blank" title="Github"><i class="icon icon-github"></i></a></li><li><a href="https://juejin.cn/user/2348212570298807" target="_blank" title="Juejin"><i class="icon icon-juejin"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">公告</h3><div class="widget-body"><div id="board"><div class="content"><p>欢迎交流与分享经验!</p></div></div></div></div><div class="widget"><h3 class="widget-title">分类</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Git/DeBug/">DeBug</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/%E5%B7%A5%E7%A8%8B%E5%8C%96/">工程化</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Git/%E5%B7%A5%E7%A8%8B%E5%8C%96/npm/">npm</a><span class="category-list-count">1</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Github/">Github</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Github/%E5%B7%A5%E5%85%B7/">工具</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Github/%E5%B7%A5%E5%85%B7/Node/">Node</a><span class="category-list-count">1</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Js/">Js</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Js/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Js/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vue/">Vue</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Vue/%E5%B7%A5%E7%A8%8B%E5%8C%96%EF%BC%8Cprettier/">工程化，prettier</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%80%BB%E7%BB%93/">总结</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a><span class="category-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">标签</h3><div class="widget-body"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/DeBug/" rel="tag">DeBug</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Github/" rel="tag">Github</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Js/" rel="tag">Js</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node/" rel="tag">Node</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/" rel="tag">Vue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue3/" rel="tag">Vue3</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/prettier/" rel="tag">prettier</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socket-io/" rel="tag">socket.io</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue-cli/" rel="tag">vue@cli</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7/" rel="tag">工具</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" rel="tag">工程化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" rel="tag">性能优化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%BB%E7%BB%93/" rel="tag">总结</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%8A%82%E6%B5%81%E9%98%B2%E6%8A%96/" rel="tag">节流防抖</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%98%9F%E5%88%97/" rel="tag">队列</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E5%AF%B9%E5%AF%B9%E8%B1%A1/" rel="tag">面对对象</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag">面试</a><span class="tag-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">标签云</h3><div class="widget-body tagcloud"><a href="/tags/DeBug/" style="font-size:13px">DeBug</a> <a href="/tags/Git/" style="font-size:13px">Git</a> <a href="/tags/Github/" style="font-size:13px">Github</a> <a href="/tags/Js/" style="font-size:14px">Js</a> <a href="/tags/Node/" style="font-size:13px">Node</a> <a href="/tags/Vue/" style="font-size:13px">Vue</a> <a href="/tags/Vue3/" style="font-size:13px">Vue3</a> <a href="/tags/npm/" style="font-size:13px">npm</a> <a href="/tags/prettier/" style="font-size:13px">prettier</a> <a href="/tags/socket-io/" style="font-size:13px">socket.io</a> <a href="/tags/vue-cli/" style="font-size:13px">vue@cli</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size:13px">工具</a> <a href="/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" style="font-size:13px">工程化</a> <a href="/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" style="font-size:13px">性能优化</a> <a href="/tags/%E6%80%BB%E7%BB%93/" style="font-size:13.5px">总结</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size:13px">数据结构</a> <a href="/tags/%E8%8A%82%E6%B5%81%E9%98%B2%E6%8A%96/" style="font-size:13px">节流防抖</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size:13px">设计模式</a> <a href="/tags/%E9%98%9F%E5%88%97/" style="font-size:13px">队列</a> <a href="/tags/%E9%9D%A2%E5%AF%B9%E5%AF%B9%E8%B1%A1/" style="font-size:13px">面对对象</a> <a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size:13px">面试</a></div></div><div class="widget"><h3 class="widget-title">归档</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">六月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">五月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">四月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">七月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">一月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">2</span></li></ul></div></div><div class="widget"><h3 class="widget-title">最新文章</h3><div class="widget-body"><ul class="recent-post-list list-unstyled"><li><div class="item-thumb"><a href="/8e08379d750c.html" class="thumb"><span class="thumb-image thumb-none"></span></a></div><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/Git/">Git</a><i class="icon icon-angle-right"></i><a class="category-link" href="/categories/Git/%E5%B7%A5%E7%A8%8B%E5%8C%96/">工程化</a></p><p class="item-title"><a href="/8e08379d750c.html" class="title">还在手动发包? 试试release-it 自动发包吧📦</a></p><p class="item-date"><time datetime="2023-06-11T10:56:36.000Z" itemprop="datePublished">2023-06-11</time></p></div></li><li><div class="item-thumb"><a href="/8d142cc6d228.html" class="thumb"><span class="thumb-image thumb-none"></span></a></div><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/Vue/">Vue</a><i class="icon icon-angle-right"></i><a class="category-link" href="/categories/Vue/%E5%B7%A5%E7%A8%8B%E5%8C%96%EF%BC%8Cprettier/">工程化，prettier</a></p><p class="item-title"><a href="/8d142cc6d228.html" class="title">记一次vue@cli创建项目prettier失效</a></p><p class="item-date"><time datetime="2023-05-31T13:41:00.000Z" itemprop="datePublished">2023-05-31</time></p></div></li><li><div class="item-thumb"><a href="/b1ab80e28404.html" class="thumb"><span class="thumb-image thumb-none"></span></a></div><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/Js/">Js</a></p><p class="item-title"><a href="/b1ab80e28404.html" class="title">防抖debounce理解</a></p><p class="item-date"><time datetime="2023-04-09T13:54:09.000Z" itemprop="datePublished">2023-04-09</time></p></div></li><li><div class="item-thumb"><a href="/b5876a494e6d.html" class="thumb"><span class="thumb-image thumb-none"></span></a></div><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/Js/">Js</a><i class="icon icon-angle-right"></i><a class="category-link" href="/categories/Js/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a></p><p class="item-title"><a href="/b5876a494e6d.html" class="title">JavaScript数据结构之——队列</a></p><p class="item-date"><time datetime="2022-12-05T13:02:58.000Z" itemprop="datePublished">2022-12-05</time></p></div></li><li><div class="item-thumb"><a href="/f28e7bfffbb9.html" class="thumb"><span class="thumb-image thumb-none"></span></a></div><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/Git/">Git</a><i class="icon icon-angle-right"></i><a class="category-link" href="/categories/Git/DeBug/">DeBug</a></p><p class="item-title"><a href="/f28e7bfffbb9.html" class="title">如何学习github上的项目</a></p><p class="item-date"><time datetime="2022-12-04T13:29:08.000Z" itemprop="datePublished">2022-12-04</time></p></div></li></ul></div></div></div></aside><aside class="sidebar sidebar-toc collapse in" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><nav id="toc" class="article-toc"><h3 class="toc-title">文章目录</h3><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8E%98%E9%87%91%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0-%E5%AE%9A%E6%97%B6%E6%89%A7%E8%A1%8C-%E9%82%AE%E7%AE%B1%E6%8E%A8%E9%80%81-%E4%BD%A0%E8%BF%98%E6%83%B3%E8%A6%81%E5%95%A5"><span class="toc-number">1.</span> <span class="toc-text">掘金自动签到 ➕ 定时执行 ➕邮箱推送 你还想要啥❓</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">2.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B7%E5%A4%87%E8%83%BD%E5%8A%9B"><span class="toc-number">3.</span> <span class="toc-text">具备能力</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#start-quickly"><span class="toc-number">4.</span> <span class="toc-text">Start quickly</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie%E8%8E%B7%E5%8F%96%E6%96%B9%E5%BC%8F"><span class="toc-number">4.1.</span> <span class="toc-text">cookie获取方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%82%AE%E7%AE%B1%E8%AE%BE%E7%BD%AE"><span class="toc-number">4.2.</span> <span class="toc-text">邮箱设置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.</span> <span class="toc-text">具体实现</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E6%89%A7%E8%A1%8C"><span class="toc-number">5.1.</span> <span class="toc-text">自动执行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81"><span class="toc-number">5.2.</span> <span class="toc-text">邮件发送📧</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#actions-secrets-%E5%AF%86%E7%A0%81%E5%AE%89%E5%85%A8"><span class="toc-number">5.3.</span> <span class="toc-text">Actions secrets 密码安全</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#qa"><span class="toc-number">5.4.</span> <span class="toc-text">Q&amp;A</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E6%89%A7%E8%A1%8C%E5%BB%B6%E8%BF%9F"><span class="toc-number">5.4.1.</span> <span class="toc-text">自动执行延迟</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E5%95%A5%E4%B8%8D%E7%94%A8documentcookie"><span class="toc-number">5.4.2.</span> <span class="toc-text">为啥不用document.cookie?</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E"><span class="toc-number">5.5.</span> <span class="toc-text">声明📢</span></a></li></ol></li></ol></nav></div></aside><main class="main" role="main"><div class="content"><article id="post-掘金自动签到➕定时执行➕邮箱推送-你还想要啥❓" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">掘金自动签到➕定时执行➕邮箱推送 你还想要啥❓</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/692e96f41680.html" class="article-date"><time datetime="2022-01-16T13:15:12.000Z" itemprop="datePublished">2022-01-16</time> </a></span><span class="article-category"><i class="icon icon-folder"></i> <a class="article-category-link" href="/categories/Github/">Github</a>►<a class="article-category-link" href="/categories/Github/%E5%B7%A5%E5%85%B7/">工具</a>►<a class="article-category-link" href="/categories/Github/%E5%B7%A5%E5%85%B7/Node/">Node</a> </span><span class="article-tag"><i class="icon icon-tags"></i> <a class="article-tag-link-link" href="/tags/Github/" rel="tag">Github</a>, <a class="article-tag-link-link" href="/tags/Node/" rel="tag">Node</a>, <a class="article-tag-link-link" href="/tags/%E5%B7%A5%E5%85%B7/" rel="tag">工具</a> </span><span class="article-read hidden-xs"><i class="icon icon-eye-fill" aria-hidden="true"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span> </span></span><span class="post-comment"><i class="icon icon-comment"></i> <a href="/692e96f41680.html#comments" class="article-comment-link">评论</a></span> <span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计: 3.7k(字)</span> <span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长: 15(分)</span></div></div><div class="article-entry marked-body" itemprop="articleBody"><h1 id="掘金自动签到-定时执行-邮箱推送-你还想要啥"><a class="markdownIt-Anchor" href="#掘金自动签到-定时执行-邮箱推送-你还想要啥"></a> 掘金自动签到 ➕ 定时执行 ➕邮箱推送 你还想要啥❓</h1><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4a4f074044ab4321ad0675aab5d58a00~tplv-k3u1fbpfcp-zoom-crop-mark:1512:1512:1512:851.awebp?" alt=""></p><h1 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h1><p>冒着被关进小黑屋的风险 写了个掘金自动签到抽奖程序 包含了自动执行、签到、免费抽奖、沾喜气、邮件通知的脚本，以后再也不用每天忘记签到了😄</p><p>事情是这样的 元旦那天由于玩的太嗨 忘记了掘金签到这么一回事 作为一名专业的摸鱼🐟选手 怎么能断签呢（好吧 我是为了第二天5120矿石）果断买了补签卡 后来在想 为啥不写一个每天自动执行的签到脚本呢？？</p><p><strong>重要❗</strong></p><p>掘金团队已经对签到脚本采取措施，禁止🙅‍♂️使用自动签到脚本，违者将清空所有矿石或者封号，具体规则可参见<a target="_blank" rel="noopener" href="https://juejin.cn/pin/7065954293509160997">禁止脚本签到行为沸点</a> ，大家还是遵循社区规范，每天登陆掘金进行签到。之前有使用过该项目的，建议将fork下来的仓库workflow手动禁止，或者直接删除项目，文章中的github项目链接我已删除。</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2c842de5e857466c88d6bdb7486e7ae9~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><h1 id="具备能力"><a class="markdownIt-Anchor" href="#具备能力"></a> 具备能力</h1><ul><li>[x] <code>action</code> 每天9点定时执行</li><li>[x] 邮件通知<ul><li>[ ] cookie过期邮件通知</li></ul></li><li>[x] 签到</li><li>[x] 沾喜气</li><li>[x] 抽奖</li><li>[ ] 设定想要兑换的周边 自动计算还需要签到多少天<br>目前就具备这么多能力 项目会持续维护 添加的新的功能（前提是不会被优弧关起来）如果有更好的项目可以在评论区提出</li></ul><h1 id="start-quickly"><a class="markdownIt-Anchor" href="#start-quickly"></a> Start quickly</h1><p>用编辑器打开项目后 需要将带有<strong>手动填写</strong>的几项数据修改为自己的 其他不要动</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置文件</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 需要手动填写</span></span><br><span class="line">  <span class="attr">cookie</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="comment">// 请求地址</span></span><br><span class="line">  <span class="attr">baseUrl</span>: <span class="string">&#x27;https://api.juejin.cn&#x27;</span>,</span><br><span class="line">  <span class="comment">// api地址</span></span><br><span class="line">  <span class="attr">api</span>: &#123;</span><br><span class="line">   ...</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 邮箱配置</span></span><br><span class="line">  <span class="attr">emailConfig</span>: &#123;</span><br><span class="line">    <span class="comment">// 邮箱服务 163|qq</span></span><br><span class="line">    <span class="attr">service</span>: <span class="string">&#x27;163&#x27;</span>,</span><br><span class="line">    <span class="comment">// 邮箱 手动填写</span></span><br><span class="line">    <span class="attr">email</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="comment">// 邮箱授权码  手动填写</span></span><br><span class="line">    <span class="attr">pass</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="cookie获取方式"><a class="markdownIt-Anchor" href="#cookie获取方式"></a> cookie获取方式</h2><blockquote><p>cookie 有过期时间 大概是一个月 或者是退出登陆也会过期<br>登陆进入到掘金，<strong>F12</strong>打开控制台，选择<strong>network</strong>后随便点击一个接口，找到请求头中的<code>cookie</code>，选中数据后右键<strong>复制值</strong></p></blockquote><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b3d16490afb8465d93dcbf544497436d~tplv-k3u1fbpfcp-zoom-1.image" alt="image"></p><h2 id="邮箱设置"><a class="markdownIt-Anchor" href="#邮箱设置"></a> 邮箱设置</h2><p>这里以163邮箱为例 qq邮箱同理 如果是163邮箱 直接将<code>service</code>字段设置为163（qq邮箱就写qq） 然后填入你自己的邮箱 邮件发送成功 登陆邮箱会看到你给自己发了一条邮件 就像这样</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9824a69bd1d14e24bdfdec640d590485~tplv-k3u1fbpfcp-zoom-1.image" alt="image"></p><p><strong>授权码获取⚠️：</strong><br>登陆进入163邮箱 打开设置</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bccfbc6f48e74f9fa10f04d375df9044~tplv-k3u1fbpfcp-zoom-1.image" alt="image"></p><p>将以下几个设置打开 打开<code>IMAP/SMTP</code>服务时会弹窗发送短信 微信扫码后就可以发送短信（qq邮箱这一步开启需要手动进行验证发送短信）</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/05b361b1ae8a48398aae7d64626e3534~tplv-k3u1fbpfcp-zoom-1.image" alt="image"></p><p>我这里已经添加过了 就直接点击新增授权 也是一样会弹出二维码扫码发送短信<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/27da536385c044d6a185191e1ff76489~tplv-k3u1fbpfcp-zoom-1.image" alt="image"></p><p>短信发送完毕后点击我已发送 然后就会得到你的授权码（注意授权码只展示一次） 将授权吗粘贴到配置文件中的 <code>pass</code>字段</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7f2a43fde0c54462a0e7de66287b88a5~tplv-k3u1fbpfcp-zoom-1.image" alt="image"></p><p>将所有的参数填入无误后 可以用命令<code>node index.js</code>本地运行 可以收到邮件并且邮件里有日志消息 恭喜你🎉 以后再也不用每天签到了（会不会被官方打死）</p><p>确认无误后将修改后的项目<code>push</code> 项目已经设置了自动执行 每天<strong>9点</strong>会自动执行签到 并且发送邮件进行通知</p><p>自从用了自动签到后 妈妈再也不用担心我忘记签到了 兑换Switch不是梦</p><h1 id="具体实现"><a class="markdownIt-Anchor" href="#具体实现"></a> 具体实现</h1><p>如果只关注脚本功能 看到这里就可以左拐🚪了 如果对实现感兴趣 这里也和你分享一下具体的实现思路</p><p>有了想法之后就开始去扒掘金签到相关的接口 挨个接口点开看 都是给了些啥数据 每个数据都是用来干啥的 经过漫长的调试后 脚本签到能力就完成了 功能主要由一下几个接口组成</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 签到</span></span><br><span class="line"><span class="attr">checkIn</span>: <span class="string">&#x27;/growth_api/v1/check_in&#x27;</span>,</span><br><span class="line"><span class="comment">// 查询签到</span></span><br><span class="line"><span class="attr">getCheckStatus</span>: <span class="string">&#x27;/growth_api/v1/get_today_status&#x27;</span>,</span><br><span class="line"><span class="comment">// 查询签到天数</span></span><br><span class="line"><span class="attr">getCheckInDays</span>: <span class="string">&#x27;/growth_api/v1/get_counts&#x27;</span>,</span><br><span class="line"><span class="comment">// 查询当前矿石</span></span><br><span class="line"><span class="attr">getCurrentPoint</span>: <span class="string">&#x27;/growth_api/v1/get_cur_point&#x27;</span>,</span><br><span class="line"><span class="comment">// 查询抽奖</span></span><br><span class="line"><span class="attr">getlotteryStatus</span>: <span class="string">&#x27;/growth_api/v1/lottery_config/get&#x27;</span>,</span><br><span class="line"><span class="comment">// 抽奖</span></span><br><span class="line"><span class="attr">draw</span>: <span class="string">&#x27;/growth_api/v1/lottery/draw&#x27;</span>,</span><br><span class="line"><span class="comment">// 沾喜气</span></span><br><span class="line"><span class="attr">dipLucky</span>: <span class="string">&#x27;/growth_api/v1/lottery_lucky/dip_lucky&#x27;</span></span><br><span class="line"><span class="comment">// 获取沾喜气列表用户</span></span><br><span class="line"><span class="attr">getLuckyUserList</span>: <span class="string">&#x27;/growth_api/v1/lottery_history/global_big&#x27;</span></span><br></pre></td></tr></table></figure><p>接下来就很简单了 接接口嘛 谁还不会了 找个请求库直接干 这里我选用的是<code>axios</code></p><p>先配置一下请求 在<code>index.js</code>写入 将<code>config</code>文件中的<code>cookie</code>丢进请求头中</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置请求地址</span></span><br><span class="line">axios.defaults.baseURL = config.baseUrl</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置cookie</span></span><br><span class="line">axios.defaults.headers[<span class="string">&#x27;cookie&#x27;</span>] = config.cookie</span><br><span class="line"></span><br><span class="line"><span class="comment">// 相应拦截处理</span></span><br><span class="line">axios.interceptors.response.use((response) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="keyword">data</span> &#125; = response</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">data</span>.err_msg === <span class="string">&#x27;success&#x27;</span> &amp;&amp; <span class="keyword">data</span>.err_no === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">data</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Promise.reject(<span class="keyword">data</span>.err_msg)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, (error) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> Promise.reject(error)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>接下来就直接请求接口，请求循序依次为</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ba37964d4e1c43dca962b5a5e13f4d5b~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>以下主要代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查看今天是否已经签到</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">Boolean</span>&#125; 是否签到过 </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getCheckStatus</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> getCheckStatusRes = <span class="keyword">await</span> <span class="title function_">axios</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: config.<span class="property">api</span>.<span class="property">getCheckStatus</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> getCheckStatusRes.<span class="property">data</span></span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="string">`查询签到失败!【<span class="subst">$&#123;error&#125;</span>】`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询当前矿石</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getCurrentPoint</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> getCurrentPointRes = <span class="keyword">await</span> <span class="title function_">axios</span>(&#123; <span class="attr">url</span>: config.<span class="property">api</span>.<span class="property">getCurrentPoint</span>, <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span> &#125;)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`当前总矿石: <span class="subst">$&#123;getCurrentPointRes.data&#125;</span>数`</span>)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="string">`查询矿石失败!<span class="subst">$&#123;error.err_msg&#125;</span>`</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询免费抽奖次数</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">Boolean</span>&#125; 是否有免费抽奖次数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getlotteryStatus</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> getlotteryStatusRes = <span class="keyword">await</span> <span class="title function_">axios</span>(&#123; <span class="attr">url</span>: config.<span class="property">api</span>.<span class="property">getlotteryStatus</span>, <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span> &#125;)</span><br><span class="line">    <span class="keyword">return</span> getlotteryStatusRes.<span class="property">data</span>.<span class="property">free_count</span> === <span class="number">0</span></span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="string">`查询免费抽奖失败！【<span class="subst">$&#123;error&#125;</span>】`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取沾喜气列表用户historyId</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">string</span>&#125; 被沾的幸运儿的history_id</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getLuckyUserHistoryId</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 接口为分页查询  默认查询条10条数据 &#123;page_no: 0, page_size: 5&#125;</span></span><br><span class="line">    <span class="keyword">const</span> luckyList = <span class="keyword">await</span> <span class="title function_">axios</span>(&#123; <span class="attr">url</span>: config.<span class="property">api</span>.<span class="property">getLuckyUserList</span>, <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span> &#125;)</span><br><span class="line">    <span class="comment">// 随机抽取一位幸运儿  沾他</span></span><br><span class="line">    <span class="keyword">return</span> luckyList.<span class="property">data</span>.<span class="property">lotteries</span>[<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * luckyList.<span class="property">data</span>.<span class="property">lotteries</span>.<span class="property">length</span>)]?.<span class="property">history_id</span></span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="string">`获取沾喜气列表用户historyId失败`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 沾喜气</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">dipLucky</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 获取historyId</span></span><br><span class="line">    <span class="keyword">const</span> historyId = <span class="keyword">await</span> <span class="title function_">getLuckyUserHistoryId</span>()</span><br><span class="line">    <span class="comment">// 沾喜气接口   传递lottery_history_id</span></span><br><span class="line">    <span class="keyword">const</span> dipLuckyRes = <span class="keyword">await</span> <span class="title function_">axios</span>(&#123; <span class="attr">url</span>: config.<span class="property">api</span>.<span class="property">dipLucky</span>, <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>, <span class="attr">data</span>: &#123; <span class="attr">lottery_history_id</span>: historyId &#125; &#125;)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`占喜气成功! 🎉 【当前幸运值：<span class="subst">$&#123;dipLuckyRes.data.total_value&#125;</span>/6000】`</span>)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="string">`占喜气失败！ <span class="subst">$&#123;error&#125;</span>`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 抽奖</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">draw</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> freeCount = <span class="keyword">await</span> <span class="title function_">getlotteryStatus</span>()</span><br><span class="line">    <span class="keyword">if</span> (freeCount) &#123;</span><br><span class="line">      <span class="comment">// 没有免费抽奖次数</span></span><br><span class="line">      <span class="keyword">throw</span> <span class="string">&#x27;今日免费抽奖以用完&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 开始抽奖</span></span><br><span class="line">    <span class="keyword">const</span> drawRes = <span class="keyword">await</span> <span class="title function_">axios</span>(&#123; <span class="attr">url</span>: config.<span class="property">api</span>.<span class="property">draw</span>, <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span> &#125;)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`恭喜你抽到【<span class="subst">$&#123;drawRes.data.lottery_name&#125;</span>】🎉`</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 先沾一下喜气</span></span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">dipLucky</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (drawRes.<span class="property">data</span>.<span class="property">lottery_type</span> === <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="comment">// 抽到矿石 查询总矿石</span></span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">getCurrentPoint</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`抽奖失败!=======&gt; 【<span class="subst">$&#123;error&#125;</span>】`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *查询签到天数</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">Object</span>&#125; continuousDay 连续签到天数 sumCount 总签到天数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getCheckInDays</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> getCheckInDays = <span class="keyword">await</span> <span class="title function_">axios</span>(&#123; <span class="attr">url</span>: config.<span class="property">api</span>.<span class="property">getCheckInDays</span>, <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span> &#125;)</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">continuousDay</span>: getCheckInDays.<span class="property">data</span>.<span class="property">cont_count</span>, <span class="attr">sumCount</span>: getCheckInDays.<span class="property">data</span>.<span class="property">sum_count</span> &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="string">`查询签到天数失败!🙁【<span class="subst">$&#123;getCheckInDays.err_msg&#125;</span>】`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 签到</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">checkIn</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 查询今天是否签到没</span></span><br><span class="line">    <span class="keyword">const</span> checkStatusRes = <span class="keyword">await</span> <span class="title function_">getCheckStatus</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!checkStatusRes) &#123;</span><br><span class="line">      <span class="comment">// 签到</span></span><br><span class="line">      <span class="keyword">const</span> checkInRes = <span class="keyword">await</span> <span class="title function_">axios</span>(&#123; <span class="attr">url</span>: config.<span class="property">api</span>.<span class="property">checkIn</span>, <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span> &#125;)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`签到成功，当前总矿石<span class="subst">$&#123;checkInRes.data.sum_point&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 查询签到天数</span></span><br><span class="line">      <span class="keyword">const</span> getCheckInDaysRes = <span class="keyword">await</span> <span class="title function_">getCheckInDays</span>()</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`连续抽奖<span class="subst">$&#123;getCheckInDaysRes.continuousDay&#125;</span>天  总签到天数<span class="subst">$&#123;getCheckInDaysRes.sumCount&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 签到成功 去抽奖</span></span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">draw</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;今日已经签到 ✅&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`签到失败!=======&gt; <span class="subst">$&#123;error&#125;</span>`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="自动执行"><a class="markdownIt-Anchor" href="#自动执行"></a> 自动执行</h2><p>关于自动执行 我最开始想的方案是通过服务器部署 开启一个定时任务去执行 这种方式需要有服务器 比较麻烦 也有人用云函数 我又懒得去注册 后了找到一种方案就是 白嫖<code>Github Action</code> 通过<code>CI</code>设置定时任务 每天自动执行 <code>Github</code>人人都有 要求也较低 由于我不是很懂<code>CI</code>这方面的东西 这次为了脚本也只是学了个皮毛 具体代码如下</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">jjCheckInScript</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">schedule:</span></span><br><span class="line">    <span class="comment"># 每天9点执行 时间格式 minute hour day month week 设置的时间是UTC 不是北京时间 需要+8</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">cron:</span> <span class="string">&quot;0 1 * * *&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A workflow run is made up of one or more jobs that can run sequentially or in parallel</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">start:</span></span><br><span class="line">    <span class="comment"># 运行环境为最新版的Ubuntu</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span>  </span><br><span class="line"></span><br><span class="line">      [[<span class="string">安装node</span>]]<span class="string">.js</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Node.js</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v2</span>  </span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&#x27;14&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># 安装依赖并且执行脚本</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line">      </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Start</span> <span class="string">task</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">node</span> <span class="string">index.js</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这里关键的代码是<code>schedule</code> 将触发任务的方式改为定时执行 到了设定好的时间后会自动执行任务 任务会以最新版本的<code>ubuntu</code>系统进行运行 安装<code>node</code> 安装项目中的依赖后 执行<code>index.js</code>中的代码 如果想要修改执行时间 按照<code>minute hour day month week</code> 的格式修改<code>schedule</code>字段即可（设置的时间是<code>UTC</code> 北京时间 需要**+8**）</p><h2 id="邮件发送"><a class="markdownIt-Anchor" href="#邮件发送"></a> 邮件发送📧</h2><p>邮件发送这里选用的是<a target="_blank" rel="noopener" href="https://nodemailer.com/about/">Nodemail</a>库 它的功能十分强大 支持多种邮箱服务 支持<code>HTML</code>内容、纯文本内容、附件、图片等等 发送邮件方式也很简单 具体代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nodemailer = <span class="built_in">require</span>(<span class="string">&#x27;nodemailer&#x27;</span>)</span><br><span class="line">​</span><br><span class="line"><span class="comment">// 日志处理  将脚本日志通过ejs渲染成html</span></span><br><span class="line"><span class="keyword">const</span> logs = []</span><br><span class="line"><span class="variable language_">console</span>.<span class="property">oldLog</span> = <span class="variable language_">console</span>.<span class="property">log</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="property">oldErr</span> = <span class="variable language_">console</span>.<span class="property">error</span></span><br><span class="line">​</span><br><span class="line"><span class="variable language_">console</span>.<span class="property">log</span> = <span class="function">(<span class="params">str</span>) =&gt;</span> &#123;</span><br><span class="line">  logs.<span class="title function_">push</span>(&#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">    <span class="attr">text</span>: str</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">oldLog</span>(str)</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="variable language_">console</span>.<span class="property">error</span> = <span class="function">(<span class="params">str</span>) =&gt;</span> &#123;</span><br><span class="line">  logs.<span class="title function_">push</span>(&#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">    <span class="attr">text</span>: str</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">oldErr</span>(str)</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 发送邮件</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">sendEmail</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> template = ejs.<span class="title function_">compile</span>(fs.<span class="title function_">readFileSync</span>(path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;email.ejs&#x27;</span>), <span class="string">&#x27;utf8&#x27;</span>));</span><br><span class="line">    <span class="keyword">const</span> transporter = nodemailer.<span class="title function_">createTransport</span>(&#123;</span><br><span class="line">      <span class="attr">service</span>: process.<span class="property">env</span>.<span class="property">SERVICE</span>, <span class="comment">// 邮箱服务</span></span><br><span class="line">      <span class="attr">port</span>: <span class="number">465</span>, <span class="comment">// 端口</span></span><br><span class="line">      <span class="attr">secure</span>: <span class="literal">true</span>, <span class="comment">// 使用TLS，SSL加密端口465</span></span><br><span class="line">      <span class="attr">secureConnection</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">auth</span>: &#123;</span><br><span class="line">        <span class="attr">user</span>: process.<span class="property">env</span>.<span class="property">EMAIL</span>, <span class="comment">// 发送者邮箱</span></span><br><span class="line">        <span class="attr">pass</span>: process.<span class="property">env</span>.<span class="property">PASS</span>, <span class="comment">// 邮箱授权码</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">​</span><br><span class="line">    <span class="comment">// 发送邮件</span></span><br><span class="line">    <span class="keyword">await</span> transporter.<span class="title function_">sendMail</span>(&#123;</span><br><span class="line">      <span class="attr">from</span>: process.<span class="property">env</span>.<span class="property">EMAIL</span>,</span><br><span class="line">      <span class="attr">to</span>: process.<span class="property">env</span>.<span class="property">EMAIL</span>,</span><br><span class="line">      <span class="attr">subject</span>: <span class="string">&#x27;掘金签到通知🔔&#x27;</span>,</span><br><span class="line">      <span class="attr">html</span>: <span class="title function_">template</span>(&#123;</span><br><span class="line">        <span class="attr">logs</span>: logs</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">​</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`邮件发送失败！<span class="subst">$&#123;error&#125;</span>`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">​</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>邮件内容 我这里用<code>ejs</code>写了一个简单的日志模版 用来承载脚本的<code>log</code> 在前面我对<code>console.log console.error</code>进行重写 将<code>str</code>存储到<code>logs</code>数组中 吧<code>logs</code>数据传入模版引擎生成<code>html</code></p><p>邮件发送其实很简单 具体配置可以查看<a target="_blank" rel="noopener" href="https://nodemailer.com/smtp/">官方文档</a> 这里就解释一下用到的配置</p><ul><li><strong>service:</strong> 邮箱服务 <code>Node mai l</code>内部已经支持了很多<a target="_blank" rel="noopener" href="https://nodemailer.com/smtp/well-known/">邮箱服务</a> 如果填写这个字段就不需要写<code>host</code></li><li><strong>host:</strong> 邮箱的主机IP地址 这一项一版在开启<code>IMAP/SMTP</code>后会展示邮箱的IP地址</li><li><strong>prot:</strong> 端口号 默认的为<code>465</code></li><li><strong>secure：</strong> 配置安全链接</li><li><strong>secureConnection:</strong> 使用<code>SSL</code>（默认为false）</li><li><strong>auth.user:</strong> 发送者邮箱</li><li><strong>auth.pass:</strong> 邮箱授权码</li><li><strong>from:</strong> 发送者邮箱</li><li><strong>to:</strong> 接受者邮箱</li><li><strong>subject:</strong> 邮件主题</li><li><strong>html:</strong> 邮件内容<code>html</code>字符串</li></ul><h2 id="actions-secrets-密码安全"><a class="markdownIt-Anchor" href="#actions-secrets-密码安全"></a> Actions secrets 密码安全</h2><p>关于<code>cookie</code> 邮箱授权码 刚开始是写在一个配置文件夹里面 后来啦哥提出了更好的方式 就是用<code>Actions secrets</code> 这种方式可以避免关键数据暴露 （万一那个无聊的家伙拿你cookie去梭哈了呢😏） 还是小心为上</p><p>其实使用也很简单 我之前对这块完全不熟悉 看了会<a target="_blank" rel="noopener" href="https://docs.github.com/cn/actions/security-guides/encrypted-secrets">官方文档</a> 三下五除二就弄好了 在添加好<code>secrets</code>数据后 我们需要在<code>blank.yml</code>文件中对数据进行获取 获取方式也很简单 直接通过<code>$&#123;&#123;secrets.youKey&#125;&#125;</code>就可以获取到 以该项目为例</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 环境变量</span><br><span class="line"><span class="attr">env</span>:</span><br><span class="line">  <span class="attr">COOKIE</span>: $&#123;&#123; secrets.<span class="property">COOKIE</span> &#125;&#125;</span><br><span class="line">  <span class="attr">PASS</span>: $&#123;&#123; secrets.<span class="property">PASS</span> &#125;&#125;</span><br><span class="line">  <span class="attr">EMAIL</span>: $&#123;&#123; secrets.<span class="property">EMAIL</span> &#125;&#125;</span><br><span class="line">  <span class="attr">SERVICE</span>: $&#123;&#123; secrets.<span class="property">SERVICE</span> &#125;&#125;</span><br></pre></td></tr></table></figure><p>在设置完之后 我们就可以在环境变量中使用这些数据 就像这样</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">process.<span class="property">env</span>.<span class="property">COOKIE</span></span><br><span class="line">process.<span class="property">env</span>.<span class="property">EMAIL</span></span><br></pre></td></tr></table></figure><p>但是获取到的数据在<code>Actions</code>中是无法进行展示的 在输出日志中 你定义的所有密码都会被清除 并在输出日志之前用星号替换 也是为了防止泄漏</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bda476d9d0b945b58637d5d178bd5bf2~tplv-k3u1fbpfcp-zoom-1.image" alt="image"></p><p>如果觉得这样还不够安全 在代码中可以随意使用到数据 可以尝试一下对<a target="_blank" rel="noopener" href="https://docs.github.com/cn/actions/security-guides/encrypted-secrets#limits-for-secrets">密码进行加密</a></p><h2 id="qa"><a class="markdownIt-Anchor" href="#qa"></a> Q&amp;A</h2><h3 id="自动执行延迟"><a class="markdownIt-Anchor" href="#自动执行延迟"></a> 自动执行延迟</h3><p>在开发测试的时 发现jobs没有按时执行 九点五分到公司打开<code>actions</code>时发现并没有执行<code>jobs</code> 刚开始还以为是<code>cron</code> 时间填写错误 修改时间后发现<code>github actions</code>定时任务会有延迟 延迟时间几分钟到十几分钟甚至一小时都有 但这个并不影响我们签到功能 只要是在今天签到都可以</p><p>以我测试为例 将 <code>corn</code>时间设置为每天的<code>12:30</code> 但实际执行时间为 <code>12:51</code> 差不多延迟了<code>20分钟</code></p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">on:</span></span><br><span class="line">  <span class="meta"># 定时执行</span></span><br><span class="line"><span class="symbol">  schedule:</span></span><br><span class="line">    - cron: <span class="string">&quot;30 4 * * *&quot;</span></span><br></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aacc559213ae4cb6bf9078929357c27f~tplv-k3u1fbpfcp-zoom-1.image" alt="jobs执行时间"></p><p>查看相关文档后发现 在GitHub中关于Schedule的定义：</p><blockquote><p>Note: The schedule event can be delayed during periods of high loads of GitHub Actions workflow runs. High load times include the start of every hour. To decrease the chance of delay, schedule your workflow to run at a different time of the hour.</p><p>注意: 在高负载的 GitHub action 工作流运行期间，调度事件可能会被延迟。高负载时间包括每个小时的开始。为了减少延迟的机会，请安排您的工作流在一小时的不同时间运行。</p></blockquote><p>也就是说 Schedule中的cron时间并不是真正执行的时候 而是工作流进入到GitHub进行计划排队时间 说简单点就是工作流进入到GitHub执行的队列时间 具体什么时候执行工作流 则需要看GitHub工作流的负载</p><p>这个问题在签到需求中并不是致命的问题 如果想要解决可以参考<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/379365305">Github Action的 Schedule 运行不准时的解决办法</a>这篇文章</p><h3 id="为啥不用documentcookie"><a class="markdownIt-Anchor" href="#为啥不用documentcookie"></a> 为啥不用<code>document.cookie</code>?</h3><p>控制台输入命令获取到的cookie并不完整</p><p>这是控制台获取到的<code>cookie</code>，对比一下接口的<code>cookie</code>，相差很大<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/91221fa2088b453dadcbbd408872d045~tplv-k3u1fbpfcp-zoom-1.image" alt="image"></p><h2 id="声明"><a class="markdownIt-Anchor" href="#声明"></a> 声明📢</h2><p>本项目仅适用于学习交流 并不具备其他用途 也没有经过掘金官方团队 若是被封号 与我无关（手动狗头保命）</p><p>有其他想法或功能 欢迎👏进行讨论 如果对你有帮助 给个<code>Star</code>行不行</p></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="https://wakaka378.github.io/692e96f41680.html" title="掘金自动签到➕定时执行➕邮箱推送 你还想要啥❓" target="_blank" rel="external">https://wakaka378.github.io/692e96f41680.html</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/wakaka378" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/images/avatar.jpg" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/wakaka378" target="_blank"><span class="text-dark">wakaka378</span><small class="ml-1x">a Vuer</small></a></h3><div>我很懒，啥也没有</div></div></figure></div></div></div></article><section id="comments"></section></div><nav class="bar bar-footer clearfix" data-stick-bottom><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/22c4eb459fc8.html" title="一个躺平的年中"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a></li><li class="next"><a href="/f0d2269aa2b7.html" title="2021当程序员碰到本命年..."><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li><li class="toggle-toc"><a class="toggle-btn" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button"><span>[&nbsp;</span><span>文章目录</span> <i class="text-collapsed icon icon-anchor"></i> <i class="text-in icon icon-close"></i> <span>]</span></a></li></ul><button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button><div class="bar-right"></div></div></nav><div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content donate"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="modal-body"><div class="donate-box"><div class="donate-head"><p>感谢您的支持，我会继续努力的!</p></div><div class="tab-content"><div role="tabpanel" class="tab-pane fade active in" id="alipay"><div class="donate-payimg"><img src="/images/donate/alipayimg.png" alt="扫码支持" title="扫一扫"></div><p class="text-muted mv">扫码打赏，你说多少就多少</p><p class="text-grey">打开支付宝扫一扫，即可进行扫码打赏哦</p></div><div role="tabpanel" class="tab-pane fade" id="wechatpay"><div class="donate-payimg"><img src="/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫"></div><p class="text-muted mv">扫码打赏，你说多少就多少</p><p class="text-grey">打开微信扫一扫，即可进行扫码打赏哦</p></div></div><div class="donate-footer"><ul class="nav nav-tabs nav-justified" role="tablist"><li role="presentation" class="active"><a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a></li><li role="presentation"><a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a></li></ul></div></div></div></div></div></div></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/wakaka378" target="_blank" title="Github"><i class="icon icon-github"></i></a></li><li><a href="https://juejin.cn/user/2348212570298807" target="_blank" title="Juejin"><i class="icon icon-juejin"></i></a></li></ul><div class="copyright">&copy; 2023 John Doe<div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(未命名)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://utteranc.es/client.js" repo="wakaka378/utterances" issue-term="title" label="✨💬" theme="github-light" crossorigin="anonymous" async></script></body></html>